<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>GCM-Docs - 10&nbsp; Groups Plugin</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./ch11-ResourcesPlugin.html" rel="next">
<link href="./ch09-PersonPropertiesPlugin.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Groups Plugin</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">GCM-Docs</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">The General Computation Model (GCM)</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch01-Introduction.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch02-GettingStarted.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Getting Started</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch03-StochasticsPlugin.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Stochastics Plugin</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch04-ReportsPlugin.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Reports Plugin</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch05-Properties.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Properties</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch06-GlobalPropertiesPlugin.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Global Properties Plugin</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch07-PeoplePlugin.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">People Plugin</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch08-RegionsPlugin.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Regions Plugin</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch09-PersonPropertiesPlugin.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Person Properties Plugin</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch10-GroupsPlugins.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Groups Plugin</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch11-ResourcesPlugin.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Resources Plugin</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch12-MaterialsPlugin.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Materials Plugin</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch13-PartitionsPlugin.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Partitions Plugin</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#plugin-data-dependency" id="toc-plugin-data-dependency" class="nav-link active" data-scroll-target="#plugin-data-dependency"><span class="toc-section-number">10.1</span>  Plugin Data Dependency</a></li>
  <li><a href="#plugin-data-initialization" id="toc-plugin-data-initialization" class="nav-link" data-scroll-target="#plugin-data-initialization"><span class="toc-section-number">10.2</span>  Plugin Data initialization</a></li>
  <li><a href="#plugin-behavior" id="toc-plugin-behavior" class="nav-link" data-scroll-target="#plugin-behavior"><span class="toc-section-number">10.3</span>  Plugin Behavior</a></li>
  <li><a href="#data-manager" id="toc-data-manager" class="nav-link" data-scroll-target="#data-manager"><span class="toc-section-number">10.4</span>  Data Manager</a></li>
  <li><a href="#example-code-lesson-17" id="toc-example-code-lesson-17" class="nav-link" data-scroll-target="#example-code-lesson-17"><span class="toc-section-number">10.5</span>  Example Code (Lesson 17)</a></li>
  <li><a href="#model" id="toc-model" class="nav-link" data-scroll-target="#model"><span class="toc-section-number">10.6</span>  Model</a></li>
  <li><a href="#model-execution" id="toc-model-execution" class="nav-link" data-scroll-target="#model-execution"><span class="toc-section-number">10.7</span>  Model Execution</a></li>
  <li><a href="#experiment-dimensions" id="toc-experiment-dimensions" class="nav-link" data-scroll-target="#experiment-dimensions"><span class="toc-section-number">10.8</span>  Experiment dimensions</a></li>
  <li><a href="#the-actors" id="toc-the-actors" class="nav-link" data-scroll-target="#the-actors"><span class="toc-section-number">10.9</span>  The actors</a></li>
  <li><a href="#population-loader" id="toc-population-loader" class="nav-link" data-scroll-target="#population-loader"><span class="toc-section-number">10.10</span>  Population Loader</a>
  <ul class="collapse">
  <li><a href="#telework-manager" id="toc-telework-manager" class="nav-link" data-scroll-target="#telework-manager"><span class="toc-section-number">10.10.1</span>  Telework manager</a></li>
  <li><a href="#school-manager" id="toc-school-manager" class="nav-link" data-scroll-target="#school-manager"><span class="toc-section-number">10.10.2</span>  School manager</a></li>
  <li><a href="#infection-manager" id="toc-infection-manager" class="nav-link" data-scroll-target="#infection-manager"><span class="toc-section-number">10.10.3</span>  Infection Manager</a></li>
  <li><a href="#inspecting-the-output" id="toc-inspecting-the-output" class="nav-link" data-scroll-target="#inspecting-the-output"><span class="toc-section-number">10.10.4</span>  Inspecting the output</a></li>
  <li><a href="#person-property-report" id="toc-person-property-report" class="nav-link" data-scroll-target="#person-property-report"><span class="toc-section-number">10.10.5</span>  Person Property Report</a></li>
  <li><a href="#group-population-report" id="toc-group-population-report" class="nav-link" data-scroll-target="#group-population-report"><span class="toc-section-number">10.10.6</span>  Group Population Report</a></li>
  <li><a href="#disease-state-report" id="toc-disease-state-report" class="nav-link" data-scroll-target="#disease-state-report"><span class="toc-section-number">10.10.7</span>  Disease State Report</a></li>
  <li><a href="#contagion-report" id="toc-contagion-report" class="nav-link" data-scroll-target="#contagion-report"><span class="toc-section-number">10.10.8</span>  Contagion Report</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Groups Plugin</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">

</div>
<p>The groups plugin manages the assignment people to various groups such as homes, schools, work places and other social organizations. As such, it is dependent on the people plugin. Like people, groups can have property definitions. Unlike people, groups have a modeler-defined group type that dictates which group properties apply.</p>
<section id="plugin-data-dependency" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="plugin-data-dependency"><span class="header-section-number">10.1</span> Plugin Data Dependency</h2>
<p>The groups plugin depends on the people plugin and the stochastics plugin. The stochastics plugin is used for random sampling of people from groups.</p>
</section>
<section id="plugin-data-initialization" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="plugin-data-initialization"><span class="header-section-number">10.2</span> Plugin Data initialization</h2>
<p>The plugin is initialized using a GroupsPluginData object that:</p>
<ul>
<li>adds group types</li>
<li>defines group properties for each group type</li>
<li>sets group property value per group</li>
<li>adds groups</li>
<li>initializes the person membership in groups</li>
</ul>
</section>
<section id="plugin-behavior" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="plugin-behavior"><span class="header-section-number">10.3</span> Plugin Behavior</h2>
<p>The plugin adds a single data manager to the simulation as an instance of the GroupsDataManager that is initialized with the GroupsPluginData.</p>
</section>
<section id="data-manager" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="data-manager"><span class="header-section-number">10.4</span> Data Manager</h2>
<p>The data manager manages group memberships and group property values. The data manager provides public methods that:</p>
<ul>
<li>Add/Remove a group</li>
<li>Add a group type</li>
<li>Add/Remove a person to/from a group</li>
<li>Define a group property</li>
<li>Set a group property value</li>
<li>Sample a random person from a group</li>
<li>Provide many queries about the state of groups</li>
</ul>
<p>The data manager also produces observable events:</p>
<ul>
<li>GroupAdditionEvent – when a group is added</li>
<li>GroupImminentRemovalEvent – when a group is about to be removed</li>
<li>GroupMembershipAdditionEvent – when a person is added to a group</li>
<li>GroupMembershipRemovalEvent – when a person is removed from a group</li>
<li>GroupPropertyDefinitionEvent – when a new group property is defined</li>
<li>GroupPropertyUpdateEvent – when a group property value is updated</li>
<li>GroupTypeAdditionEvent – when a new group type is added</li>
</ul>
</section>
<section id="example-code-lesson-17" class="level2" data-number="10.5">
<h2 data-number="10.5" class="anchored" data-anchor-id="example-code-lesson-17"><span class="header-section-number">10.5</span> Example Code (Lesson 17)</h2>
<p>Example_17.java shows the use of the groups plugin. In it we will examine:</p>
<ul>
<li>The initialization of the groups plugin</li>
<li>The movement of people in and out of groups</li>
</ul>
<p>The example includes seven plugins:</p>
<ul>
<li>Groups plugin – (GCM core plugin) used to manage groups</li>
<li>People plugin – (GCM core plugin) used to manage people</li>
<li>Person properties plugin – (GCM core plugin) used to decorate properties onto people</li>
<li>Global properties plugin – (GCM core plugin) used to store policies and initial conditions affecting groups and disease transmission</li>
<li>Stochastics plugin – (GCM core plugin) used to generate random numbers used in various decisions</li>
<li>Regions Plugin – (GCM core plugin) used for various reports</li>
<li>Model plugin – (local plugin) used to introduce four actors that will:
<ul>
<li>Load the population</li>
<li>Manage the spread of disease through transmission in groups</li>
<li>Manage group-based mitigation strategies in schools</li>
<li>Manage group-based mitigation strategies in work places</li>
</ul></li>
</ul>
</section>
<section id="model" class="level2" data-number="10.6">
<h2 data-number="10.6" class="anchored" data-anchor-id="model"><span class="header-section-number">10.6</span> Model</h2>
<p>The example’s model represents a disease that is not treatable but can be mitigated through social distancing, school closures and the use of telework arrangements. People at the start of the simulation are either immune or susceptible. Infection is spread through personal contact in groups and is subject to public policies triggered by the number of infectious people present in the total population or in specific groups. The population is set to 10,000 people and the groups are synthetically derived using fixed proportions (global properties) for school aged children (0-18 yrs), working adults (19 to 64 yrs) and non-working seniors (65+yrs). All people are assigned a home group. School aged children are assigned to a single school group and working age adults are assigned to a single work group. The number of each group type is determined by fixed expected groups sizes (global properties).</p>
<p>At the beginning of the model, a small number of adults are infected at random. Each infected person is immediately infectious and will infect one person per day over a random period from 3 to 12 days inclusive. Without mitigations, each transmission is successful. Public policies are reviewed on a weekly basis. As the number of total public infections increase, some work groups may elect to move to a telework status, reducing transmissions by 50% in those groups. Similarly, when a school’s level of infection increases it will move to a split cohort mode, reducing transmission success to 50%. If infection within a cohort continues to rise, the cohort is closed and the children are no longer assigned to a school group. For simplicity of modeling, telework arrangements, cohort schools and school closures do not revert as infection levels subside.</p>
</section>
<section id="model-execution" class="level2" data-number="10.7">
<h2 data-number="10.7" class="anchored" data-anchor-id="model-execution"><span class="header-section-number">10.7</span> Model Execution</h2>
<p>The example’s execution is shown in <a href="#lst-groups_plugin_example_17_init">Code Block&nbsp;<span>10.1</span></a> and <a href="#lst-groups_plugin_example_17_execute">Code Block&nbsp;<span>10.2</span></a>.</p>
<div class="cell">
<div id="lst-groups_plugin_example_17_init" class="listing">
<p>Code Block&nbsp;10.1: Executing example 17 with an output directory.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_example_17_init" data-lst-cap="Executing example 17 with an output directory."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_example_17_init-1"><a href="#lst-groups_plugin_example_17_init-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span> <span class="kw">throws</span> <span class="bu">IOException</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_example_17_init-2"><a href="#lst-groups_plugin_example_17_init-2"></a>    <span class="cf">if</span> <span class="op">(</span>args<span class="op">.</span><span class="fu">length</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_example_17_init-3"><a href="#lst-groups_plugin_example_17_init-3"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">RuntimeException</span><span class="op">(</span><span class="st">"One output directory argument is required"</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_init-4"><a href="#lst-groups_plugin_example_17_init-4"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_example_17_init-5"><a href="#lst-groups_plugin_example_17_init-5"></a>    Path outputDirectory <span class="op">=</span> Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span>args<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="lst-groups_plugin_example_17_init-6"><a href="#lst-groups_plugin_example_17_init-6"></a>    <span class="cf">if</span> <span class="op">(!</span>Files<span class="op">.</span><span class="fu">exists</span><span class="op">(</span>outputDirectory<span class="op">))</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_example_17_init-7"><a href="#lst-groups_plugin_example_17_init-7"></a>        Files<span class="op">.</span><span class="fu">createDirectory</span><span class="op">(</span>outputDirectory<span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_init-8"><a href="#lst-groups_plugin_example_17_init-8"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_example_17_init-9"><a href="#lst-groups_plugin_example_17_init-9"></a>        <span class="cf">if</span> <span class="op">(!</span>Files<span class="op">.</span><span class="fu">isDirectory</span><span class="op">(</span>outputDirectory<span class="op">))</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_example_17_init-10"><a href="#lst-groups_plugin_example_17_init-10"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IOException</span><span class="op">(</span><span class="st">"Provided path is not a directory"</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_init-11"><a href="#lst-groups_plugin_example_17_init-11"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_example_17_init-12"><a href="#lst-groups_plugin_example_17_init-12"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_example_17_init-13"><a href="#lst-groups_plugin_example_17_init-13"></a></span>
<span id="lst-groups_plugin_example_17_init-14"><a href="#lst-groups_plugin_example_17_init-14"></a>    <span class="kw">new</span> <span class="fu">Example_17</span><span class="op">(</span>outputDirectory<span class="op">).</span><span class="fu">execute</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_init-15"><a href="#lst-groups_plugin_example_17_init-15"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div id="lst-groups_plugin_example_17_execute" class="listing">
<p>Code Block&nbsp;10.2: The various plugins are gathered from their initial data, dimensions are added and the experiment is executed over 36 scenarios using 8 threads.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_example_17_execute" data-lst-cap="The various plugins are gathered from their initial data, dimensions are added and the experiment is executed over 36 scenarios using 8 threads."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_example_17_execute-1"><a href="#lst-groups_plugin_example_17_execute-1"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">execute</span><span class="op">()</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_example_17_execute-2"><a href="#lst-groups_plugin_example_17_execute-2"></a></span>
<span id="lst-groups_plugin_example_17_execute-3"><a href="#lst-groups_plugin_example_17_execute-3"></a>    ExperimentParameterData experimentParameterData <span class="op">=</span> ExperimentParameterData<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-4"><a href="#lst-groups_plugin_example_17_execute-4"></a>            <span class="op">.</span><span class="fu">setThreadCount</span><span class="op">(</span><span class="dv">8</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-5"><a href="#lst-groups_plugin_example_17_execute-5"></a>            <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_execute-6"><a href="#lst-groups_plugin_example_17_execute-6"></a></span>
<span id="lst-groups_plugin_example_17_execute-7"><a href="#lst-groups_plugin_example_17_execute-7"></a>    Experiment<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="lst-groups_plugin_example_17_execute-8"><a href="#lst-groups_plugin_example_17_execute-8"></a></span>
<span id="lst-groups_plugin_example_17_execute-9"><a href="#lst-groups_plugin_example_17_execute-9"></a>            <span class="op">.</span><span class="fu">addPlugin</span><span class="op">(</span><span class="fu">getGlobalPropertiesPlugin</span><span class="op">())</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-10"><a href="#lst-groups_plugin_example_17_execute-10"></a>            <span class="op">.</span><span class="fu">addPlugin</span><span class="op">(</span><span class="fu">getPersonPropertiesPlugin</span><span class="op">())</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-11"><a href="#lst-groups_plugin_example_17_execute-11"></a>            <span class="op">.</span><span class="fu">addPlugin</span><span class="op">(</span><span class="fu">getRegionsPlugin</span><span class="op">())</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-12"><a href="#lst-groups_plugin_example_17_execute-12"></a>            <span class="op">.</span><span class="fu">addPlugin</span><span class="op">(</span><span class="fu">getPeoplePlugin</span><span class="op">())</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-13"><a href="#lst-groups_plugin_example_17_execute-13"></a>            <span class="op">.</span><span class="fu">addPlugin</span><span class="op">(</span><span class="fu">getGroupsPlugin</span><span class="op">())</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-14"><a href="#lst-groups_plugin_example_17_execute-14"></a>            <span class="op">.</span><span class="fu">addPlugin</span><span class="op">(</span><span class="fu">getStochasticsPlugin</span><span class="op">())</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-15"><a href="#lst-groups_plugin_example_17_execute-15"></a>            <span class="op">.</span><span class="fu">addPlugin</span><span class="op">(</span>ModelPlugin<span class="op">.</span><span class="fu">getModelPlugin</span><span class="op">())</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-16"><a href="#lst-groups_plugin_example_17_execute-16"></a></span>
<span id="lst-groups_plugin_example_17_execute-17"><a href="#lst-groups_plugin_example_17_execute-17"></a>            <span class="op">.</span><span class="fu">addDimension</span><span class="op">(</span><span class="fu">getTeleworkProbabilityDimension</span><span class="op">())</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-18"><a href="#lst-groups_plugin_example_17_execute-18"></a>            <span class="op">.</span><span class="fu">addDimension</span><span class="op">(</span><span class="fu">getTeleworkInfectionThresholdDimension</span><span class="op">())</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-19"><a href="#lst-groups_plugin_example_17_execute-19"></a>            <span class="op">.</span><span class="fu">addDimension</span><span class="op">(</span><span class="fu">getSchoolDimension</span><span class="op">())</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-20"><a href="#lst-groups_plugin_example_17_execute-20"></a></span>
<span id="lst-groups_plugin_example_17_execute-21"><a href="#lst-groups_plugin_example_17_execute-21"></a>            <span class="op">.</span><span class="fu">addExperimentContextConsumer</span><span class="op">(</span><span class="fu">getNIOReportItemHandler</span><span class="op">())</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-22"><a href="#lst-groups_plugin_example_17_execute-22"></a>            <span class="op">.</span><span class="fu">setExperimentParameterData</span><span class="op">(</span>experimentParameterData<span class="op">)</span><span class="co">//              </span></span>
<span id="lst-groups_plugin_example_17_execute-23"><a href="#lst-groups_plugin_example_17_execute-23"></a>            <span class="op">.</span><span class="fu">build</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-24"><a href="#lst-groups_plugin_example_17_execute-24"></a>            <span class="op">.</span><span class="fu">execute</span><span class="op">();</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_execute-25"><a href="#lst-groups_plugin_example_17_execute-25"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>The first action is to load the global properties plugin (<a href="#lst-groups_plugin_example_17_global_properties">Code Block&nbsp;<span>10.3</span></a>). The fifteen global properties are marked as immutable since they will not change over the course of the simulation. Further, eleven of the properties are fixed and their values are set in the plugin data. The four remaining properties participate in the dimensions of the experiment and are not directly set in the global plugin.</p>
<ul>
<li>SUSCEPTIBLE_POPULATION_PROPORTION – The fraction of the population that is susceptible</li>
<li>INITIAL_INFECTIONS – The number of adults initially infected</li>
<li>MIN_INFECTIOUS_PERIOD – The minimum number of days a person is infectious</li>
<li>MAX_INFECTIOUS_PERIOD – The maximum number of days a person is infectious</li>
<li>POPULATION_SIZE – The initial size of the population</li>
<li>CHILD_POPULATION_PROPORTION – The fraction of the population between the ages of 0 and 18, inclusive</li>
<li>SENIOR_POPULATION_PROPORTION – The fraction of the population 65 and older</li>
<li>R0 – The expected number of people a single person will infect if all contacts are susceptible and transmission success is 100% likely</li>
<li>AVERAGE_HOME_SIZE – The average number of people per household</li>
<li>AVERAGE_SCHOOL_SIZE – The average number of students in a school</li>
<li>AVERAGE_WORK_SIZE – The average number of people per work place</li>
<li>TELEWORK_INFECTION_THRESHOLD – The total infection density that triggers some work places to institute telework mode</li>
<li>TELEWORK_PROBABILTY – The probability that a work place will convert to telework mode once telework is allowed</li>
<li>SCHOOL_COHORT_INFECTION_THRESHOLD – The infection density within a school that triggers the school moving to a split cohort</li>
<li>SCHOOL_CLOSURE_INFECTION_THRESHOLD – The infection density within a school cohort that triggers the closure of that cohort.</li>
</ul>
<div class="cell">
<div id="lst-groups_plugin_example_17_global_properties" class="listing">
<p>Code Block&nbsp;10.3: The global properties plugin is initialized with several properties</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_example_17_global_properties" data-lst-cap="The global properties plugin is initialized with several properties"><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_example_17_global_properties-1"><a href="#lst-groups_plugin_example_17_global_properties-1"></a><span class="kw">private</span> Plugin <span class="fu">getGlobalPropertiesPlugin</span><span class="op">()</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_example_17_global_properties-2"><a href="#lst-groups_plugin_example_17_global_properties-2"></a>    GlobalPropertiesPluginData<span class="op">.</span><span class="fu">Builder</span> builder <span class="op">=</span> GlobalPropertiesPluginData<span class="op">.</span><span class="fu">builder</span><span class="op">();</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_global_properties-3"><a href="#lst-groups_plugin_example_17_global_properties-3"></a></span>
<span id="lst-groups_plugin_example_17_global_properties-4"><a href="#lst-groups_plugin_example_17_global_properties-4"></a>    PropertyDefinition propertyDefinition <span class="op">=</span> PropertyDefinition<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_global_properties-5"><a href="#lst-groups_plugin_example_17_global_properties-5"></a>            <span class="op">.</span><span class="fu">setType</span><span class="op">(</span><span class="bu">Double</span><span class="op">.</span><span class="fu">class</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_global_properties-6"><a href="#lst-groups_plugin_example_17_global_properties-6"></a>            <span class="op">.</span><span class="fu">setPropertyValueMutability</span><span class="op">(</span><span class="kw">false</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_global_properties-7"><a href="#lst-groups_plugin_example_17_global_properties-7"></a>            <span class="op">.</span><span class="fu">setDefaultValue</span><span class="op">(</span><span class="fl">0.0</span><span class="op">).</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_global_properties-8"><a href="#lst-groups_plugin_example_17_global_properties-8"></a></span>
<span id="lst-groups_plugin_example_17_global_properties-9"><a href="#lst-groups_plugin_example_17_global_properties-9"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">SUSCEPTIBLE_POPULATION_PROPORTION</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-10"><a href="#lst-groups_plugin_example_17_global_properties-10"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">AVERAGE_HOME_SIZE</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-11"><a href="#lst-groups_plugin_example_17_global_properties-11"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">AVERAGE_SCHOOL_SIZE</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-12"><a href="#lst-groups_plugin_example_17_global_properties-12"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">AVERAGE_WORK_SIZE</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-13"><a href="#lst-groups_plugin_example_17_global_properties-13"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">CHILD_POPULATION_PROPORTION</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-14"><a href="#lst-groups_plugin_example_17_global_properties-14"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">SENIOR_POPULATION_PROPORTION</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-15"><a href="#lst-groups_plugin_example_17_global_properties-15"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">R0</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-16"><a href="#lst-groups_plugin_example_17_global_properties-16"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">TELEWORK_INFECTION_THRESHOLD</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-17"><a href="#lst-groups_plugin_example_17_global_properties-17"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">TELEWORK_PROBABILTY</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-18"><a href="#lst-groups_plugin_example_17_global_properties-18"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">SCHOOL_COHORT_INFECTION_THRESHOLD</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-19"><a href="#lst-groups_plugin_example_17_global_properties-19"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">SCHOOL_CLOSURE_INFECTION_THRESHOLD</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-20"><a href="#lst-groups_plugin_example_17_global_properties-20"></a></span>
<span id="lst-groups_plugin_example_17_global_properties-21"><a href="#lst-groups_plugin_example_17_global_properties-21"></a>    propertyDefinition <span class="op">=</span> PropertyDefinition<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_global_properties-22"><a href="#lst-groups_plugin_example_17_global_properties-22"></a>            <span class="op">.</span><span class="fu">setType</span><span class="op">(</span><span class="bu">Integer</span><span class="op">.</span><span class="fu">class</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_global_properties-23"><a href="#lst-groups_plugin_example_17_global_properties-23"></a>            <span class="op">.</span><span class="fu">setPropertyValueMutability</span><span class="op">(</span><span class="kw">false</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_global_properties-24"><a href="#lst-groups_plugin_example_17_global_properties-24"></a>            <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_global_properties-25"><a href="#lst-groups_plugin_example_17_global_properties-25"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">INITIAL_INFECTIONS</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-26"><a href="#lst-groups_plugin_example_17_global_properties-26"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">MIN_INFECTIOUS_PERIOD</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-27"><a href="#lst-groups_plugin_example_17_global_properties-27"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">MAX_INFECTIOUS_PERIOD</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-28"><a href="#lst-groups_plugin_example_17_global_properties-28"></a>    builder<span class="op">.</span><span class="fu">defineGlobalProperty</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">POPULATION_SIZE</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-29"><a href="#lst-groups_plugin_example_17_global_properties-29"></a></span>
<span id="lst-groups_plugin_example_17_global_properties-30"><a href="#lst-groups_plugin_example_17_global_properties-30"></a>    builder<span class="op">.</span><span class="fu">setGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">POPULATION_SIZE</span><span class="op">,</span> <span class="dv">10_000</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-31"><a href="#lst-groups_plugin_example_17_global_properties-31"></a>    builder<span class="op">.</span><span class="fu">setGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">SUSCEPTIBLE_POPULATION_PROPORTION</span><span class="op">,</span> <span class="fl">1.0</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-32"><a href="#lst-groups_plugin_example_17_global_properties-32"></a>    builder<span class="op">.</span><span class="fu">setGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">INITIAL_INFECTIONS</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-33"><a href="#lst-groups_plugin_example_17_global_properties-33"></a>    builder<span class="op">.</span><span class="fu">setGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">MIN_INFECTIOUS_PERIOD</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-34"><a href="#lst-groups_plugin_example_17_global_properties-34"></a>    builder<span class="op">.</span><span class="fu">setGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">MAX_INFECTIOUS_PERIOD</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-35"><a href="#lst-groups_plugin_example_17_global_properties-35"></a>    builder<span class="op">.</span><span class="fu">setGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">R0</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-36"><a href="#lst-groups_plugin_example_17_global_properties-36"></a>    builder<span class="op">.</span><span class="fu">setGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">CHILD_POPULATION_PROPORTION</span><span class="op">,</span> <span class="fl">0.235</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-37"><a href="#lst-groups_plugin_example_17_global_properties-37"></a>    builder<span class="op">.</span><span class="fu">setGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">SENIOR_POPULATION_PROPORTION</span><span class="op">,</span> <span class="fl">0.169</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-38"><a href="#lst-groups_plugin_example_17_global_properties-38"></a>    builder<span class="op">.</span><span class="fu">setGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">AVERAGE_HOME_SIZE</span><span class="op">,</span> <span class="fl">2.5</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-39"><a href="#lst-groups_plugin_example_17_global_properties-39"></a>    builder<span class="op">.</span><span class="fu">setGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">AVERAGE_SCHOOL_SIZE</span><span class="op">,</span> <span class="fl">250.0</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-40"><a href="#lst-groups_plugin_example_17_global_properties-40"></a>    builder<span class="op">.</span><span class="fu">setGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">AVERAGE_WORK_SIZE</span><span class="op">,</span> <span class="fl">30.0</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_global_properties-41"><a href="#lst-groups_plugin_example_17_global_properties-41"></a></span>
<span id="lst-groups_plugin_example_17_global_properties-42"><a href="#lst-groups_plugin_example_17_global_properties-42"></a>    GlobalPropertiesPluginData globalPropertiesPluginData <span class="op">=</span> builder<span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_global_properties-43"><a href="#lst-groups_plugin_example_17_global_properties-43"></a></span>
<span id="lst-groups_plugin_example_17_global_properties-44"><a href="#lst-groups_plugin_example_17_global_properties-44"></a>    <span class="cf">return</span> GlobalPropertiesPlugin<span class="op">.</span><span class="fu">builder</span><span class="op">().</span><span class="fu">setGlobalPropertiesPluginData</span><span class="op">(</span>globalPropertiesPluginData<span class="op">)</span></span>
<span id="lst-groups_plugin_example_17_global_properties-45"><a href="#lst-groups_plugin_example_17_global_properties-45"></a>            <span class="op">.</span><span class="fu">getGlobalPropertiesPlugin</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_global_properties-46"><a href="#lst-groups_plugin_example_17_global_properties-46"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>The person properties plugin is loaded in (<a href="#lst-groups_plugin_example_17_person_properties">Code Block&nbsp;<span>10.4</span></a>). The properties are:</p>
<ul>
<li>AGE – An integer value for the age of a person: child (0-18), adult (19-64), senior (65+)</li>
<li>DISEASE_STATE – The state for a person: IMMUNE, SUSCEPTIBLE, INFECTIOUS, RECOVERED</li>
<li>INFECTED_COUNT – The number of people infected by each particular person</li>
</ul>
<div class="cell">
<div id="lst-groups_plugin_example_17_person_properties" class="listing">
<p>Code Block&nbsp;10.4: The person properties plugin is initialized with several properties.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_example_17_person_properties" data-lst-cap="The person properties plugin is initialized with several properties."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_example_17_person_properties-1"><a href="#lst-groups_plugin_example_17_person_properties-1"></a><span class="kw">private</span> Plugin <span class="fu">getPersonPropertiesPlugin</span><span class="op">()</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_example_17_person_properties-2"><a href="#lst-groups_plugin_example_17_person_properties-2"></a></span>
<span id="lst-groups_plugin_example_17_person_properties-3"><a href="#lst-groups_plugin_example_17_person_properties-3"></a>    PersonPropertiesPluginData<span class="op">.</span><span class="fu">Builder</span> builder <span class="op">=</span> PersonPropertiesPluginData<span class="op">.</span><span class="fu">builder</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_person_properties-4"><a href="#lst-groups_plugin_example_17_person_properties-4"></a></span>
<span id="lst-groups_plugin_example_17_person_properties-5"><a href="#lst-groups_plugin_example_17_person_properties-5"></a>    PropertyDefinition propertyDefinition <span class="op">=</span> PropertyDefinition<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-6"><a href="#lst-groups_plugin_example_17_person_properties-6"></a>            <span class="op">.</span><span class="fu">setType</span><span class="op">(</span><span class="bu">Integer</span><span class="op">.</span><span class="fu">class</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-7"><a href="#lst-groups_plugin_example_17_person_properties-7"></a>            <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_person_properties-8"><a href="#lst-groups_plugin_example_17_person_properties-8"></a></span>
<span id="lst-groups_plugin_example_17_person_properties-9"><a href="#lst-groups_plugin_example_17_person_properties-9"></a>    builder<span class="op">.</span><span class="fu">definePersonProperty</span><span class="op">(</span>PersonProperty<span class="op">.</span><span class="fu">AGE</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">false</span><span class="op">);</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-10"><a href="#lst-groups_plugin_example_17_person_properties-10"></a></span>
<span id="lst-groups_plugin_example_17_person_properties-11"><a href="#lst-groups_plugin_example_17_person_properties-11"></a>    propertyDefinition <span class="op">=</span> PropertyDefinition<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-12"><a href="#lst-groups_plugin_example_17_person_properties-12"></a>            <span class="op">.</span><span class="fu">setType</span><span class="op">(</span>DiseaseState<span class="op">.</span><span class="fu">class</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-13"><a href="#lst-groups_plugin_example_17_person_properties-13"></a>            <span class="op">.</span><span class="fu">setDefaultValue</span><span class="op">(</span>DiseaseState<span class="op">.</span><span class="fu">SUSCEPTIBLE</span><span class="op">).</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_person_properties-14"><a href="#lst-groups_plugin_example_17_person_properties-14"></a></span>
<span id="lst-groups_plugin_example_17_person_properties-15"><a href="#lst-groups_plugin_example_17_person_properties-15"></a>    builder<span class="op">.</span><span class="fu">definePersonProperty</span><span class="op">(</span>PersonProperty<span class="op">.</span><span class="fu">DISEASE_STATE</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">false</span><span class="op">);</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-16"><a href="#lst-groups_plugin_example_17_person_properties-16"></a></span>
<span id="lst-groups_plugin_example_17_person_properties-17"><a href="#lst-groups_plugin_example_17_person_properties-17"></a>    propertyDefinition <span class="op">=</span> PropertyDefinition<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-18"><a href="#lst-groups_plugin_example_17_person_properties-18"></a>            <span class="op">.</span><span class="fu">setType</span><span class="op">(</span><span class="bu">Integer</span><span class="op">.</span><span class="fu">class</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-19"><a href="#lst-groups_plugin_example_17_person_properties-19"></a>            <span class="op">.</span><span class="fu">setDefaultValue</span><span class="op">(</span><span class="dv">0</span><span class="op">).</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_person_properties-20"><a href="#lst-groups_plugin_example_17_person_properties-20"></a></span>
<span id="lst-groups_plugin_example_17_person_properties-21"><a href="#lst-groups_plugin_example_17_person_properties-21"></a>    builder<span class="op">.</span><span class="fu">definePersonProperty</span><span class="op">(</span>PersonProperty<span class="op">.</span><span class="fu">INFECTED_COUNT</span><span class="op">,</span> propertyDefinition<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="kw">false</span><span class="op">);</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-22"><a href="#lst-groups_plugin_example_17_person_properties-22"></a></span>
<span id="lst-groups_plugin_example_17_person_properties-23"><a href="#lst-groups_plugin_example_17_person_properties-23"></a>    PersonPropertiesPluginData personPropertiesPluginData <span class="op">=</span> builder<span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_person_properties-24"><a href="#lst-groups_plugin_example_17_person_properties-24"></a></span>
<span id="lst-groups_plugin_example_17_person_properties-25"><a href="#lst-groups_plugin_example_17_person_properties-25"></a>    PersonPropertyReportPluginData personPropertyReportPluginData <span class="op">=</span> PersonPropertyReportPluginData<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-26"><a href="#lst-groups_plugin_example_17_person_properties-26"></a>            <span class="op">.</span><span class="fu">setReportLabel</span><span class="op">(</span>ModelReportLabel<span class="op">.</span><span class="fu">PERSON_PROPERTY</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-27"><a href="#lst-groups_plugin_example_17_person_properties-27"></a>            <span class="op">.</span><span class="fu">setReportPeriod</span><span class="op">(</span>ReportPeriod<span class="op">.</span><span class="fu">DAILY</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-28"><a href="#lst-groups_plugin_example_17_person_properties-28"></a>            <span class="op">.</span><span class="fu">includePersonProperty</span><span class="op">(</span>PersonProperty<span class="op">.</span><span class="fu">DISEASE_STATE</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-29"><a href="#lst-groups_plugin_example_17_person_properties-29"></a>            <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_person_properties-30"><a href="#lst-groups_plugin_example_17_person_properties-30"></a></span>
<span id="lst-groups_plugin_example_17_person_properties-31"><a href="#lst-groups_plugin_example_17_person_properties-31"></a>    <span class="cf">return</span> PersonPropertiesPlugin<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-32"><a href="#lst-groups_plugin_example_17_person_properties-32"></a>            <span class="op">.</span><span class="fu">setPersonPropertiesPluginData</span><span class="op">(</span>personPropertiesPluginData<span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-33"><a href="#lst-groups_plugin_example_17_person_properties-33"></a>            <span class="op">.</span><span class="fu">setPersonPropertyReportPluginData</span><span class="op">(</span>personPropertyReportPluginData<span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_person_properties-34"><a href="#lst-groups_plugin_example_17_person_properties-34"></a>            <span class="op">.</span><span class="fu">getPersonPropertyPlugin</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_person_properties-35"><a href="#lst-groups_plugin_example_17_person_properties-35"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>The groups plugin (<a href="#lst-groups_plugin_example_17_groups_plugin">Code Block&nbsp;<span>10.5</span></a>) loads the group types and their corresponding group properties. The creation of groups is left to the Population Loader.</p>
<ul>
<li>HOME</li>
<li>SCHOOL
<ul>
<li>SCHOOL_STATUS : OPEN, COHORT (50% transmission reduction), CLOSED (100% transmission reduction)</li>
</ul></li>
<li>WORK
<ul>
<li>TELEWORK – Boolean designating work place as telework, reducing transmission by 50%</li>
</ul></li>
</ul>
<div class="cell">
<div id="lst-groups_plugin_example_17_groups_plugin" class="listing">
<p>Code Block&nbsp;10.5: The groups plugin includes a tele-work property for work places and open status properties for schools.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_example_17_groups_plugin" data-lst-cap="The groups plugin includes a tele-work property for work places and open status properties for schools."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_example_17_groups_plugin-1"><a href="#lst-groups_plugin_example_17_groups_plugin-1"></a><span class="kw">private</span> Plugin <span class="fu">getGroupsPlugin</span><span class="op">()</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-2"><a href="#lst-groups_plugin_example_17_groups_plugin-2"></a>    GroupsPluginData<span class="op">.</span><span class="fu">Builder</span> builder <span class="op">=</span> GroupsPluginData<span class="op">.</span><span class="fu">builder</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-3"><a href="#lst-groups_plugin_example_17_groups_plugin-3"></a>    <span class="cf">for</span> <span class="op">(</span>GroupType groupType <span class="op">:</span> GroupType<span class="op">.</span><span class="fu">values</span><span class="op">())</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-4"><a href="#lst-groups_plugin_example_17_groups_plugin-4"></a>        builder<span class="op">.</span><span class="fu">addGroupTypeId</span><span class="op">(</span>groupType<span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-5"><a href="#lst-groups_plugin_example_17_groups_plugin-5"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-6"><a href="#lst-groups_plugin_example_17_groups_plugin-6"></a>    PropertyDefinition propertyDefinition <span class="op">=</span> PropertyDefinition<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-7"><a href="#lst-groups_plugin_example_17_groups_plugin-7"></a>            <span class="op">.</span><span class="fu">setType</span><span class="op">(</span><span class="bu">Boolean</span><span class="op">.</span><span class="fu">class</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-8"><a href="#lst-groups_plugin_example_17_groups_plugin-8"></a>            <span class="op">.</span><span class="fu">setDefaultValue</span><span class="op">(</span><span class="kw">false</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-9"><a href="#lst-groups_plugin_example_17_groups_plugin-9"></a>            <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-10"><a href="#lst-groups_plugin_example_17_groups_plugin-10"></a></span>
<span id="lst-groups_plugin_example_17_groups_plugin-11"><a href="#lst-groups_plugin_example_17_groups_plugin-11"></a>    builder<span class="op">.</span><span class="fu">defineGroupProperty</span><span class="op">(</span>GroupType<span class="op">.</span><span class="fu">WORK</span><span class="op">,</span> GroupProperty<span class="op">.</span><span class="fu">TELEWORK</span><span class="op">,</span> propertyDefinition<span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-12"><a href="#lst-groups_plugin_example_17_groups_plugin-12"></a></span>
<span id="lst-groups_plugin_example_17_groups_plugin-13"><a href="#lst-groups_plugin_example_17_groups_plugin-13"></a>    propertyDefinition <span class="op">=</span> PropertyDefinition<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-14"><a href="#lst-groups_plugin_example_17_groups_plugin-14"></a>            <span class="op">.</span><span class="fu">setType</span><span class="op">(</span>SchoolStatus<span class="op">.</span><span class="fu">class</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-15"><a href="#lst-groups_plugin_example_17_groups_plugin-15"></a>            <span class="op">.</span><span class="fu">setDefaultValue</span><span class="op">(</span>SchoolStatus<span class="op">.</span><span class="fu">OPEN</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-16"><a href="#lst-groups_plugin_example_17_groups_plugin-16"></a>            <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-17"><a href="#lst-groups_plugin_example_17_groups_plugin-17"></a></span>
<span id="lst-groups_plugin_example_17_groups_plugin-18"><a href="#lst-groups_plugin_example_17_groups_plugin-18"></a>    builder<span class="op">.</span><span class="fu">defineGroupProperty</span><span class="op">(</span>GroupType<span class="op">.</span><span class="fu">SCHOOL</span><span class="op">,</span> GroupProperty<span class="op">.</span><span class="fu">SCHOOL_STATUS</span><span class="op">,</span> propertyDefinition<span class="op">);</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-19"><a href="#lst-groups_plugin_example_17_groups_plugin-19"></a></span>
<span id="lst-groups_plugin_example_17_groups_plugin-20"><a href="#lst-groups_plugin_example_17_groups_plugin-20"></a>    GroupsPluginData groupsPluginData <span class="op">=</span> builder<span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-21"><a href="#lst-groups_plugin_example_17_groups_plugin-21"></a></span>
<span id="lst-groups_plugin_example_17_groups_plugin-22"><a href="#lst-groups_plugin_example_17_groups_plugin-22"></a>    GroupPopulationReportPluginData groupPopulationReportPluginData <span class="op">=</span> <span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-23"><a href="#lst-groups_plugin_example_17_groups_plugin-23"></a>            GroupPopulationReportPluginData<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-24"><a href="#lst-groups_plugin_example_17_groups_plugin-24"></a>                    <span class="op">.</span><span class="fu">setReportLabel</span><span class="op">(</span>ModelReportLabel<span class="op">.</span><span class="fu">GROUP_POPULATON</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-25"><a href="#lst-groups_plugin_example_17_groups_plugin-25"></a>                    <span class="op">.</span><span class="fu">setReportPeriod</span><span class="op">(</span>ReportPeriod<span class="op">.</span><span class="fu">END_OF_SIMULATION</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-26"><a href="#lst-groups_plugin_example_17_groups_plugin-26"></a>                    <span class="op">.</span><span class="fu">build</span><span class="op">();</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-27"><a href="#lst-groups_plugin_example_17_groups_plugin-27"></a>    <span class="cf">return</span> GroupsPlugin<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-28"><a href="#lst-groups_plugin_example_17_groups_plugin-28"></a>            <span class="op">.</span><span class="fu">setGroupsPluginData</span><span class="op">(</span>groupsPluginData<span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-29"><a href="#lst-groups_plugin_example_17_groups_plugin-29"></a>            <span class="op">.</span><span class="fu">setGroupPopulationReportPluginData</span><span class="op">(</span>groupPopulationReportPluginData<span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-30"><a href="#lst-groups_plugin_example_17_groups_plugin-30"></a>            <span class="op">.</span><span class="fu">getGroupsPlugin</span><span class="op">();</span></span>
<span id="lst-groups_plugin_example_17_groups_plugin-31"><a href="#lst-groups_plugin_example_17_groups_plugin-31"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>The stochastics plugin is initialized with a random seed and all simulations will start in the same stochastic state. The regions plugin has five regions and the people plugin is loaded in an empty state. People are added by an actor in the model plugin.</p>
<p>The model plugin adds four actors</p>
<ul>
<li>PopulationLoader – Adds people and groups to the simulation and initializes immunity.</li>
<li>InfectionManager– Infects a small number of randomly chosen adults. Manages the progress of infections and the spread of infection from one per to another via their shared groups.</li>
<li>TeleworkManager – Reviews the status of infections within the greater population every week and triggers randomly selected work places to move to telework mode.</li>
<li>SchoolManager – Reviews the status of infections per school every week and splits school groups into cohorts. If infections increase it can close individual schools.</li>
</ul>
<p>The reports in this model are:</p>
<ul>
<li>GroupPopulationReport – Shows the distribution of group sizes for each group type at the end of the simulation.</li>
<li>PersonPropertyReport – Shows the distribution of disease state values over each day by regions</li>
<li>DiseaseStateReport – Shows the distribution of disease state at the end of the simulation with a single line per scenario</li>
<li>ContagionReport – Shows the distribution of the number of infections spread per person</li>
</ul>
</section>
<section id="experiment-dimensions" class="level2" data-number="10.8">
<h2 data-number="10.8" class="anchored" data-anchor-id="experiment-dimensions"><span class="header-section-number">10.8</span> Experiment dimensions</h2>
<p>Three dimensions are added to the experiment that define alternate values for telework infection thresholds, telework adoption probability, school cohort infection thresholds and school closure infection thresholds, yielding 36 scenarios. The values are:</p>
<ul>
<li>Telework infection threshold – 0.1, 1, and 10 percent</li>
<li>Telework adoption probability – 10, 30, 50 and 80 percent</li>
<li>School cohort and closure infection thresholds
<ul>
<li>0.1 and 1 percent</li>
<li>1 and 2 percent</li>
<li>10 and 20 percent</li>
</ul></li>
</ul>
</section>
<section id="the-actors" class="level2" data-number="10.9">
<h2 data-number="10.9" class="anchored" data-anchor-id="the-actors"><span class="header-section-number">10.9</span> The actors</h2>
<p>We will finish this chapter by reviewing the four actors of the model plugin and then examine the output.</p>
</section>
<section id="population-loader" class="level2" data-number="10.10">
<h2 data-number="10.10" class="anchored" data-anchor-id="population-loader"><span class="header-section-number">10.10</span> Population Loader</h2>
<p>The PopulationLoader actor, in <a href="#lst-groups_plugin_population_loader_init">Code Block&nbsp;<span>10.6</span></a>, adds people to the simulation based on the number in the POPULATION_SIZE global property. The population is split evenly between the regions. For each region, the manager determines the number of homes needed to house the people based on the AVERAGE_HOME_SIZE. The people are grouped into children, working adults and seniors based on related global properties. Similar calculations determine the number of schools and workplaces. The people are randomly distributed based on their ages into homes, work places and schools. Some care is given to ensure that every household has at least one adult.</p>
<div class="cell">
<div id="lst-groups_plugin_population_loader_init" class="listing">
<p>Code Block&nbsp;10.6: The population loader initializes by establishing various constants from the global properties and establishing the population of each region.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_population_loader_init" data-lst-cap="The population loader initializes by establishing various constants from the global properties and establishing the population of each region."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_population_loader_init-1"><a href="#lst-groups_plugin_population_loader_init-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">init</span><span class="op">(</span>ActorContext actorContext<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_init-2"><a href="#lst-groups_plugin_population_loader_init-2"></a>    personPropertiesDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>PersonPropertiesDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-3"><a href="#lst-groups_plugin_population_loader_init-3"></a>    groupsDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>GroupsDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-4"><a href="#lst-groups_plugin_population_loader_init-4"></a>    StochasticsDataManager stochasticsDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>StochasticsDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-5"><a href="#lst-groups_plugin_population_loader_init-5"></a>    randomGenerator <span class="op">=</span> stochasticsDataManager<span class="op">.</span><span class="fu">getRandomGenerator</span><span class="op">();</span></span>
<span id="lst-groups_plugin_population_loader_init-6"><a href="#lst-groups_plugin_population_loader_init-6"></a>    peopleDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>PeopleDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-7"><a href="#lst-groups_plugin_population_loader_init-7"></a>    GlobalPropertiesDataManager globalPropertiesDataManager <span class="op">=</span> actorContext</span>
<span id="lst-groups_plugin_population_loader_init-8"><a href="#lst-groups_plugin_population_loader_init-8"></a>            <span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>GlobalPropertiesDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-9"><a href="#lst-groups_plugin_population_loader_init-9"></a>    regionsDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>RegionsDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-10"><a href="#lst-groups_plugin_population_loader_init-10"></a></span>
<span id="lst-groups_plugin_population_loader_init-11"><a href="#lst-groups_plugin_population_loader_init-11"></a>    <span class="dt">int</span> populationSize <span class="op">=</span> globalPropertiesDataManager<span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">POPULATION_SIZE</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-12"><a href="#lst-groups_plugin_population_loader_init-12"></a>    susceptibleProbability <span class="op">=</span> globalPropertiesDataManager</span>
<span id="lst-groups_plugin_population_loader_init-13"><a href="#lst-groups_plugin_population_loader_init-13"></a>            <span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">SUSCEPTIBLE_POPULATION_PROPORTION</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-14"><a href="#lst-groups_plugin_population_loader_init-14"></a>    childPopulationProportion <span class="op">=</span> globalPropertiesDataManager</span>
<span id="lst-groups_plugin_population_loader_init-15"><a href="#lst-groups_plugin_population_loader_init-15"></a>            <span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">CHILD_POPULATION_PROPORTION</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-16"><a href="#lst-groups_plugin_population_loader_init-16"></a>    seniorPopulationProportion <span class="op">=</span> globalPropertiesDataManager</span>
<span id="lst-groups_plugin_population_loader_init-17"><a href="#lst-groups_plugin_population_loader_init-17"></a>            <span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">SENIOR_POPULATION_PROPORTION</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-18"><a href="#lst-groups_plugin_population_loader_init-18"></a>    averageHomeSize <span class="op">=</span> globalPropertiesDataManager<span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">AVERAGE_HOME_SIZE</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-19"><a href="#lst-groups_plugin_population_loader_init-19"></a>    averageSchoolSize <span class="op">=</span> globalPropertiesDataManager<span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">AVERAGE_SCHOOL_SIZE</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-20"><a href="#lst-groups_plugin_population_loader_init-20"></a>    averageWorkSize <span class="op">=</span> globalPropertiesDataManager<span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">AVERAGE_WORK_SIZE</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-21"><a href="#lst-groups_plugin_population_loader_init-21"></a></span>
<span id="lst-groups_plugin_population_loader_init-22"><a href="#lst-groups_plugin_population_loader_init-22"></a>    <span class="bu">Set</span><span class="op">&lt;</span>RegionId<span class="op">&gt;</span> regionIds <span class="op">=</span> regionsDataManager<span class="op">.</span><span class="fu">getRegionIds</span><span class="op">();</span></span>
<span id="lst-groups_plugin_population_loader_init-23"><a href="#lst-groups_plugin_population_loader_init-23"></a>    <span class="dt">int</span> regionSize <span class="op">=</span> populationSize <span class="op">/</span> regionIds<span class="op">.</span><span class="fu">size</span><span class="op">();</span></span>
<span id="lst-groups_plugin_population_loader_init-24"><a href="#lst-groups_plugin_population_loader_init-24"></a>    <span class="dt">int</span> leftoverPeople <span class="op">=</span> populationSize <span class="op">%</span> regionIds<span class="op">.</span><span class="fu">size</span><span class="op">();</span></span>
<span id="lst-groups_plugin_population_loader_init-25"><a href="#lst-groups_plugin_population_loader_init-25"></a></span>
<span id="lst-groups_plugin_population_loader_init-26"><a href="#lst-groups_plugin_population_loader_init-26"></a>    <span class="cf">for</span> <span class="op">(</span>RegionId regionId <span class="op">:</span> regionIds<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_init-27"><a href="#lst-groups_plugin_population_loader_init-27"></a>        <span class="dt">int</span> regionPopulation <span class="op">=</span> regionSize<span class="op">;</span></span>
<span id="lst-groups_plugin_population_loader_init-28"><a href="#lst-groups_plugin_population_loader_init-28"></a>        <span class="cf">if</span> <span class="op">(</span>leftoverPeople <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_init-29"><a href="#lst-groups_plugin_population_loader_init-29"></a>            leftoverPeople<span class="op">--;</span></span>
<span id="lst-groups_plugin_population_loader_init-30"><a href="#lst-groups_plugin_population_loader_init-30"></a>            regionPopulation<span class="op">++;</span></span>
<span id="lst-groups_plugin_population_loader_init-31"><a href="#lst-groups_plugin_population_loader_init-31"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_init-32"><a href="#lst-groups_plugin_population_loader_init-32"></a>        <span class="fu">initializeRegionPopulation</span><span class="op">(</span>regionId<span class="op">,</span> regionPopulation<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init-33"><a href="#lst-groups_plugin_population_loader_init-33"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_init-34"><a href="#lst-groups_plugin_population_loader_init-34"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Initializing the region population, <a href="#lst-groups_plugin_population_loader_init_region_population">Code Block&nbsp;<span>10.7</span></a>, first establishes the number of home groups, school groups and work groups by determining the number of children, working adults and seniors that are present based on various fixed global property values. The people are added with randomly determined ages and disease immunity.</p>
<div class="cell">
<div id="lst-groups_plugin_population_loader_init_region_population" class="listing">
<p>Code Block&nbsp;10.7: The population for a region is initialized with each person being assigned an age, an immunity status and a region.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_population_loader_init_region_population" data-lst-cap="The population for a region is initialized with each person being assigned an age, an immunity status and a region."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_population_loader_init_region_population-1"><a href="#lst-groups_plugin_population_loader_init_region_population-1"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">initializeRegionPopulation</span><span class="op">(</span>RegionId regionId<span class="op">,</span> <span class="dt">int</span> populationSize<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-2"><a href="#lst-groups_plugin_population_loader_init_region_population-2"></a></span>
<span id="lst-groups_plugin_population_loader_init_region_population-3"><a href="#lst-groups_plugin_population_loader_init_region_population-3"></a>    <span class="dt">double</span> n <span class="op">=</span> populationSize<span class="op">;</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-4"><a href="#lst-groups_plugin_population_loader_init_region_population-4"></a>    <span class="dt">int</span> homeCount <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span> <span class="op">(</span>n <span class="op">/</span> averageHomeSize<span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-5"><a href="#lst-groups_plugin_population_loader_init_region_population-5"></a>    <span class="dt">int</span> childCount <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span> <span class="op">(</span>n <span class="op">*</span> childPopulationProportion<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-6"><a href="#lst-groups_plugin_population_loader_init_region_population-6"></a>    <span class="dt">int</span> adultCount <span class="op">=</span> populationSize <span class="op">-</span> childCount<span class="op">;</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-7"><a href="#lst-groups_plugin_population_loader_init_region_population-7"></a>    homeCount <span class="op">=</span> FastMath<span class="op">.</span><span class="fu">min</span><span class="op">(</span>homeCount<span class="op">,</span> adultCount<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-8"><a href="#lst-groups_plugin_population_loader_init_region_population-8"></a>    <span class="dt">int</span> seniorCount <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span> <span class="op">(</span>n <span class="op">*</span> seniorPopulationProportion<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-9"><a href="#lst-groups_plugin_population_loader_init_region_population-9"></a>    seniorCount <span class="op">=</span> FastMath<span class="op">.</span><span class="fu">min</span><span class="op">(</span>seniorCount<span class="op">,</span> adultCount<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-10"><a href="#lst-groups_plugin_population_loader_init_region_population-10"></a>    <span class="dt">int</span> workingAdultCount <span class="op">=</span> adultCount <span class="op">-</span> seniorCount<span class="op">;</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-11"><a href="#lst-groups_plugin_population_loader_init_region_population-11"></a>    <span class="dt">int</span> workCount <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span> <span class="op">((</span><span class="dt">double</span><span class="op">)</span> workingAdultCount <span class="op">/</span> averageWorkSize<span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-12"><a href="#lst-groups_plugin_population_loader_init_region_population-12"></a>    <span class="dt">int</span> schoolCount <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span> <span class="op">((</span><span class="dt">double</span><span class="op">)</span> childCount <span class="op">/</span> averageSchoolSize<span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-13"><a href="#lst-groups_plugin_population_loader_init_region_population-13"></a></span>
<span id="lst-groups_plugin_population_loader_init_region_population-14"><a href="#lst-groups_plugin_population_loader_init_region_population-14"></a>    <span class="co">// create the population</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-15"><a href="#lst-groups_plugin_population_loader_init_region_population-15"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> populationSize<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-16"><a href="#lst-groups_plugin_population_loader_init_region_population-16"></a>        <span class="dt">int</span> age<span class="op">;</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-17"><a href="#lst-groups_plugin_population_loader_init_region_population-17"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">&lt;</span> seniorCount<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-18"><a href="#lst-groups_plugin_population_loader_init_region_population-18"></a>            age <span class="op">=</span> randomGenerator<span class="op">.</span><span class="fu">nextInt</span><span class="op">(</span><span class="dv">25</span><span class="op">)</span> <span class="op">+</span> <span class="dv">65</span><span class="op">;</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-19"><a href="#lst-groups_plugin_population_loader_init_region_population-19"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>i <span class="op">&lt;</span> adultCount<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-20"><a href="#lst-groups_plugin_population_loader_init_region_population-20"></a>            age <span class="op">=</span> randomGenerator<span class="op">.</span><span class="fu">nextInt</span><span class="op">(</span><span class="dv">18</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="dv">65</span> <span class="op">-</span> <span class="dv">18</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-21"><a href="#lst-groups_plugin_population_loader_init_region_population-21"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-22"><a href="#lst-groups_plugin_population_loader_init_region_population-22"></a>            age <span class="op">=</span> randomGenerator<span class="op">.</span><span class="fu">nextInt</span><span class="op">(</span><span class="dv">18</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-23"><a href="#lst-groups_plugin_population_loader_init_region_population-23"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-24"><a href="#lst-groups_plugin_population_loader_init_region_population-24"></a>        PersonPropertyValueInitialization ageInitialization <span class="op">=</span> <span class="kw">new</span> <span class="fu">PersonPropertyValueInitialization</span><span class="op">(</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-25"><a href="#lst-groups_plugin_population_loader_init_region_population-25"></a>                PersonProperty<span class="op">.</span><span class="fu">AGE</span><span class="op">,</span> age<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-26"><a href="#lst-groups_plugin_population_loader_init_region_population-26"></a></span>
<span id="lst-groups_plugin_population_loader_init_region_population-27"><a href="#lst-groups_plugin_population_loader_init_region_population-27"></a>        DiseaseState diseaseState <span class="op">=</span> DiseaseState<span class="op">.</span><span class="fu">IMMUNE</span><span class="op">;</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-28"><a href="#lst-groups_plugin_population_loader_init_region_population-28"></a>        <span class="cf">if</span> <span class="op">(</span>randomGenerator<span class="op">.</span><span class="fu">nextDouble</span><span class="op">()</span> <span class="op">&lt;</span> susceptibleProbability<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-29"><a href="#lst-groups_plugin_population_loader_init_region_population-29"></a>            diseaseState <span class="op">=</span> DiseaseState<span class="op">.</span><span class="fu">SUSCEPTIBLE</span><span class="op">;</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-30"><a href="#lst-groups_plugin_population_loader_init_region_population-30"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-31"><a href="#lst-groups_plugin_population_loader_init_region_population-31"></a></span>
<span id="lst-groups_plugin_population_loader_init_region_population-32"><a href="#lst-groups_plugin_population_loader_init_region_population-32"></a>        PersonPropertyValueInitialization diseaseInitialization <span class="op">=</span> <span class="kw">new</span> <span class="fu">PersonPropertyValueInitialization</span><span class="op">(</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-33"><a href="#lst-groups_plugin_population_loader_init_region_population-33"></a>                PersonProperty<span class="op">.</span><span class="fu">DISEASE_STATE</span><span class="op">,</span> diseaseState<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-34"><a href="#lst-groups_plugin_population_loader_init_region_population-34"></a>        PersonConstructionData personConstructionData <span class="op">=</span> PersonConstructionData<span class="op">.</span><span class="fu">builder</span><span class="op">()</span><span class="co">//</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-35"><a href="#lst-groups_plugin_population_loader_init_region_population-35"></a>                <span class="op">.</span><span class="fu">add</span><span class="op">(</span>ageInitialization<span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-36"><a href="#lst-groups_plugin_population_loader_init_region_population-36"></a>                <span class="op">.</span><span class="fu">add</span><span class="op">(</span>diseaseInitialization<span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-37"><a href="#lst-groups_plugin_population_loader_init_region_population-37"></a>                <span class="op">.</span><span class="fu">add</span><span class="op">(</span>regionId<span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-38"><a href="#lst-groups_plugin_population_loader_init_region_population-38"></a>                <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-39"><a href="#lst-groups_plugin_population_loader_init_region_population-39"></a>        peopleDataManager<span class="op">.</span><span class="fu">addPerson</span><span class="op">(</span>personConstructionData<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_init_region_population-40"><a href="#lst-groups_plugin_population_loader_init_region_population-40"></a>    <span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>In <a href="#lst-groups_plugin_population_loader_adding_groups">Code Block&nbsp;<span>10.8</span></a>, the manager continues by creating the work, home and school groups. It then organizes the people by age group in <a href="#lst-groups_plugin_population_loader_age_subsets">Code Block&nbsp;<span>10.9</span></a>. Finally, it places the people into the appropriate groups in <a href="#lst-groups_plugin_population_loader_group_assignments">Code Block&nbsp;<span>10.10</span></a>.</p>
<div class="cell">
<div id="lst-groups_plugin_population_loader_adding_groups" class="listing">
<p>Code Block&nbsp;10.8: The home, work and school groups are added to the groups data manager.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_population_loader_adding_groups" data-lst-cap="The home, work and school groups are added to the groups data manager."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_population_loader_adding_groups-1"><a href="#lst-groups_plugin_population_loader_adding_groups-1"></a><span class="co">// create the home groups</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-2"><a href="#lst-groups_plugin_population_loader_adding_groups-2"></a><span class="bu">List</span><span class="op">&lt;</span>GroupId<span class="op">&gt;</span> homeGroupIds <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-3"><a href="#lst-groups_plugin_population_loader_adding_groups-3"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> homeCount<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-4"><a href="#lst-groups_plugin_population_loader_adding_groups-4"></a>    GroupConstructionInfo groupConstructionInfo <span class="op">=</span> GroupConstructionInfo<span class="op">.</span><span class="fu">builder</span><span class="op">().</span><span class="fu">setGroupTypeId</span><span class="op">(</span>GroupType<span class="op">.</span><span class="fu">HOME</span><span class="op">)</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-5"><a href="#lst-groups_plugin_population_loader_adding_groups-5"></a>            <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-6"><a href="#lst-groups_plugin_population_loader_adding_groups-6"></a>    GroupId groupId <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">addGroup</span><span class="op">(</span>groupConstructionInfo<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-7"><a href="#lst-groups_plugin_population_loader_adding_groups-7"></a>    homeGroupIds<span class="op">.</span><span class="fu">add</span><span class="op">(</span>groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-8"><a href="#lst-groups_plugin_population_loader_adding_groups-8"></a><span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-9"><a href="#lst-groups_plugin_population_loader_adding_groups-9"></a></span>
<span id="lst-groups_plugin_population_loader_adding_groups-10"><a href="#lst-groups_plugin_population_loader_adding_groups-10"></a><span class="co">// create the work groups</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-11"><a href="#lst-groups_plugin_population_loader_adding_groups-11"></a><span class="bu">List</span><span class="op">&lt;</span>GroupId<span class="op">&gt;</span> workGroupIds <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-12"><a href="#lst-groups_plugin_population_loader_adding_groups-12"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> workCount<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-13"><a href="#lst-groups_plugin_population_loader_adding_groups-13"></a>    GroupConstructionInfo groupConstructionInfo <span class="op">=</span> GroupConstructionInfo<span class="op">.</span><span class="fu">builder</span><span class="op">().</span><span class="fu">setGroupTypeId</span><span class="op">(</span>GroupType<span class="op">.</span><span class="fu">WORK</span><span class="op">)</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-14"><a href="#lst-groups_plugin_population_loader_adding_groups-14"></a>            <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-15"><a href="#lst-groups_plugin_population_loader_adding_groups-15"></a>    GroupId groupId <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">addGroup</span><span class="op">(</span>groupConstructionInfo<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-16"><a href="#lst-groups_plugin_population_loader_adding_groups-16"></a>    workGroupIds<span class="op">.</span><span class="fu">add</span><span class="op">(</span>groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-17"><a href="#lst-groups_plugin_population_loader_adding_groups-17"></a><span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-18"><a href="#lst-groups_plugin_population_loader_adding_groups-18"></a></span>
<span id="lst-groups_plugin_population_loader_adding_groups-19"><a href="#lst-groups_plugin_population_loader_adding_groups-19"></a><span class="co">// create the school groups</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-20"><a href="#lst-groups_plugin_population_loader_adding_groups-20"></a><span class="bu">List</span><span class="op">&lt;</span>GroupId<span class="op">&gt;</span> schoolGroupIds <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-21"><a href="#lst-groups_plugin_population_loader_adding_groups-21"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> schoolCount<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-22"><a href="#lst-groups_plugin_population_loader_adding_groups-22"></a>    GroupConstructionInfo groupConstructionInfo <span class="op">=</span> GroupConstructionInfo<span class="op">.</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-23"><a href="#lst-groups_plugin_population_loader_adding_groups-23"></a>            <span class="op">.</span><span class="fu">setGroupTypeId</span><span class="op">(</span>GroupType<span class="op">.</span><span class="fu">SCHOOL</span><span class="op">).</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-24"><a href="#lst-groups_plugin_population_loader_adding_groups-24"></a>    GroupId groupId <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">addGroup</span><span class="op">(</span>groupConstructionInfo<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-25"><a href="#lst-groups_plugin_population_loader_adding_groups-25"></a>    schoolGroupIds<span class="op">.</span><span class="fu">add</span><span class="op">(</span>groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_adding_groups-26"><a href="#lst-groups_plugin_population_loader_adding_groups-26"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div id="lst-groups_plugin_population_loader_age_subsets" class="listing">
<p>Code Block&nbsp;10.9: The people are separated into age related lists.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_population_loader_age_subsets" data-lst-cap="The people are separated into age related lists."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_population_loader_age_subsets-1"><a href="#lst-groups_plugin_population_loader_age_subsets-1"></a><span class="bu">List</span><span class="op">&lt;</span>PersonId<span class="op">&gt;</span> peopleInRegion <span class="op">=</span> regionsDataManager<span class="op">.</span><span class="fu">getPeopleInRegion</span><span class="op">(</span>regionId<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-2"><a href="#lst-groups_plugin_population_loader_age_subsets-2"></a><span class="bu">List</span><span class="op">&lt;</span>PersonId<span class="op">&gt;</span> adults <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-3"><a href="#lst-groups_plugin_population_loader_age_subsets-3"></a><span class="bu">List</span><span class="op">&lt;</span>PersonId<span class="op">&gt;</span> children <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-4"><a href="#lst-groups_plugin_population_loader_age_subsets-4"></a><span class="bu">List</span><span class="op">&lt;</span>PersonId<span class="op">&gt;</span> workingAdults <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-5"><a href="#lst-groups_plugin_population_loader_age_subsets-5"></a><span class="cf">for</span> <span class="op">(</span>PersonId personId <span class="op">:</span> peopleInRegion<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-6"><a href="#lst-groups_plugin_population_loader_age_subsets-6"></a>    <span class="dt">int</span> age <span class="op">=</span> personPropertiesDataManager<span class="op">.</span><span class="fu">getPersonPropertyValue</span><span class="op">(</span>personId<span class="op">,</span> PersonProperty<span class="op">.</span><span class="fu">AGE</span><span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-7"><a href="#lst-groups_plugin_population_loader_age_subsets-7"></a>    <span class="cf">if</span> <span class="op">(</span>age <span class="op">&lt;</span> <span class="dv">18</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-8"><a href="#lst-groups_plugin_population_loader_age_subsets-8"></a>        children<span class="op">.</span><span class="fu">add</span><span class="op">(</span>personId<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-9"><a href="#lst-groups_plugin_population_loader_age_subsets-9"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-10"><a href="#lst-groups_plugin_population_loader_age_subsets-10"></a>        adults<span class="op">.</span><span class="fu">add</span><span class="op">(</span>personId<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-11"><a href="#lst-groups_plugin_population_loader_age_subsets-11"></a>        <span class="cf">if</span> <span class="op">(</span>age <span class="op">&lt;</span> <span class="dv">65</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-12"><a href="#lst-groups_plugin_population_loader_age_subsets-12"></a>            workingAdults<span class="op">.</span><span class="fu">add</span><span class="op">(</span>personId<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-13"><a href="#lst-groups_plugin_population_loader_age_subsets-13"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-14"><a href="#lst-groups_plugin_population_loader_age_subsets-14"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_age_subsets-15"><a href="#lst-groups_plugin_population_loader_age_subsets-15"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div id="lst-groups_plugin_population_loader_group_assignments" class="listing">
<p>Code Block&nbsp;10.10: People are assigned to homes, work places and schools.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_population_loader_group_assignments" data-lst-cap="People are assigned to homes, work places and schools."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_population_loader_group_assignments-1"><a href="#lst-groups_plugin_population_loader_group_assignments-1"></a><span class="bu">Random</span> random <span class="op">=</span> <span class="kw">new</span> <span class="bu">Random</span><span class="op">(</span>randomGenerator<span class="op">.</span><span class="fu">nextLong</span><span class="op">());</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-2"><a href="#lst-groups_plugin_population_loader_group_assignments-2"></a><span class="co">/*</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-3"><a href="#lst-groups_plugin_population_loader_group_assignments-3"></a><span class="co">         * Randomize the adults and assign them to the home groups such that there is at</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-4"><a href="#lst-groups_plugin_population_loader_group_assignments-4"></a><span class="co">         * least one adult in each home</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-5"><a href="#lst-groups_plugin_population_loader_group_assignments-5"></a><span class="co">         */</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-6"><a href="#lst-groups_plugin_population_loader_group_assignments-6"></a><span class="bu">Collections</span><span class="op">.</span><span class="fu">shuffle</span><span class="op">(</span>adults<span class="op">,</span> random<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-7"><a href="#lst-groups_plugin_population_loader_group_assignments-7"></a><span class="co">// put one adult in each home</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-8"><a href="#lst-groups_plugin_population_loader_group_assignments-8"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> homeGroupIds<span class="op">.</span><span class="fu">size</span><span class="op">();</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-9"><a href="#lst-groups_plugin_population_loader_group_assignments-9"></a>    PersonId personId <span class="op">=</span> adults<span class="op">.</span><span class="fu">get</span><span class="op">(</span>i<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-10"><a href="#lst-groups_plugin_population_loader_group_assignments-10"></a>    GroupId groupId <span class="op">=</span> homeGroupIds<span class="op">.</span><span class="fu">get</span><span class="op">(</span>i<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-11"><a href="#lst-groups_plugin_population_loader_group_assignments-11"></a>    groupsDataManager<span class="op">.</span><span class="fu">addPersonToGroup</span><span class="op">(</span>personId<span class="op">,</span> groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-12"><a href="#lst-groups_plugin_population_loader_group_assignments-12"></a><span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-13"><a href="#lst-groups_plugin_population_loader_group_assignments-13"></a></span>
<span id="lst-groups_plugin_population_loader_group_assignments-14"><a href="#lst-groups_plugin_population_loader_group_assignments-14"></a><span class="co">// assign the remaining adults at random to homes</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-15"><a href="#lst-groups_plugin_population_loader_group_assignments-15"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> homeGroupIds<span class="op">.</span><span class="fu">size</span><span class="op">();</span> i <span class="op">&lt;</span> adults<span class="op">.</span><span class="fu">size</span><span class="op">();</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-16"><a href="#lst-groups_plugin_population_loader_group_assignments-16"></a>    PersonId personId <span class="op">=</span> adults<span class="op">.</span><span class="fu">get</span><span class="op">(</span>i<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-17"><a href="#lst-groups_plugin_population_loader_group_assignments-17"></a>    GroupId groupId <span class="op">=</span> homeGroupIds<span class="op">.</span><span class="fu">get</span><span class="op">(</span>randomGenerator<span class="op">.</span><span class="fu">nextInt</span><span class="op">(</span>homeGroupIds<span class="op">.</span><span class="fu">size</span><span class="op">()));</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-18"><a href="#lst-groups_plugin_population_loader_group_assignments-18"></a>    groupsDataManager<span class="op">.</span><span class="fu">addPersonToGroup</span><span class="op">(</span>personId<span class="op">,</span> groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-19"><a href="#lst-groups_plugin_population_loader_group_assignments-19"></a><span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-20"><a href="#lst-groups_plugin_population_loader_group_assignments-20"></a></span>
<span id="lst-groups_plugin_population_loader_group_assignments-21"><a href="#lst-groups_plugin_population_loader_group_assignments-21"></a><span class="co">// assign working age adults to work groups</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-22"><a href="#lst-groups_plugin_population_loader_group_assignments-22"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> workingAdults<span class="op">.</span><span class="fu">size</span><span class="op">();</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-23"><a href="#lst-groups_plugin_population_loader_group_assignments-23"></a>    PersonId personId <span class="op">=</span> workingAdults<span class="op">.</span><span class="fu">get</span><span class="op">(</span>i<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-24"><a href="#lst-groups_plugin_population_loader_group_assignments-24"></a>    GroupId groupId <span class="op">=</span> workGroupIds<span class="op">.</span><span class="fu">get</span><span class="op">(</span>randomGenerator<span class="op">.</span><span class="fu">nextInt</span><span class="op">(</span>workGroupIds<span class="op">.</span><span class="fu">size</span><span class="op">()));</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-25"><a href="#lst-groups_plugin_population_loader_group_assignments-25"></a>    groupsDataManager<span class="op">.</span><span class="fu">addPersonToGroup</span><span class="op">(</span>personId<span class="op">,</span> groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-26"><a href="#lst-groups_plugin_population_loader_group_assignments-26"></a><span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-27"><a href="#lst-groups_plugin_population_loader_group_assignments-27"></a></span>
<span id="lst-groups_plugin_population_loader_group_assignments-28"><a href="#lst-groups_plugin_population_loader_group_assignments-28"></a><span class="co">// assign children to school groups</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-29"><a href="#lst-groups_plugin_population_loader_group_assignments-29"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> children<span class="op">.</span><span class="fu">size</span><span class="op">();</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-30"><a href="#lst-groups_plugin_population_loader_group_assignments-30"></a>    PersonId personId <span class="op">=</span> children<span class="op">.</span><span class="fu">get</span><span class="op">(</span>i<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-31"><a href="#lst-groups_plugin_population_loader_group_assignments-31"></a>    GroupId groupId <span class="op">=</span> schoolGroupIds<span class="op">.</span><span class="fu">get</span><span class="op">(</span>randomGenerator<span class="op">.</span><span class="fu">nextInt</span><span class="op">(</span>schoolGroupIds<span class="op">.</span><span class="fu">size</span><span class="op">()));</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-32"><a href="#lst-groups_plugin_population_loader_group_assignments-32"></a>    groupsDataManager<span class="op">.</span><span class="fu">addPersonToGroup</span><span class="op">(</span>personId<span class="op">,</span> groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-33"><a href="#lst-groups_plugin_population_loader_group_assignments-33"></a><span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-34"><a href="#lst-groups_plugin_population_loader_group_assignments-34"></a></span>
<span id="lst-groups_plugin_population_loader_group_assignments-35"><a href="#lst-groups_plugin_population_loader_group_assignments-35"></a><span class="co">// assign children to home groups</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-36"><a href="#lst-groups_plugin_population_loader_group_assignments-36"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> children<span class="op">.</span><span class="fu">size</span><span class="op">();</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-37"><a href="#lst-groups_plugin_population_loader_group_assignments-37"></a>    PersonId personId <span class="op">=</span> children<span class="op">.</span><span class="fu">get</span><span class="op">(</span>i<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-38"><a href="#lst-groups_plugin_population_loader_group_assignments-38"></a>    GroupId groupId <span class="op">=</span> homeGroupIds<span class="op">.</span><span class="fu">get</span><span class="op">(</span>randomGenerator<span class="op">.</span><span class="fu">nextInt</span><span class="op">(</span>homeGroupIds<span class="op">.</span><span class="fu">size</span><span class="op">()));</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-39"><a href="#lst-groups_plugin_population_loader_group_assignments-39"></a>    groupsDataManager<span class="op">.</span><span class="fu">addPersonToGroup</span><span class="op">(</span>personId<span class="op">,</span> groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-40"><a href="#lst-groups_plugin_population_loader_group_assignments-40"></a><span class="op">}</span></span>
<span id="lst-groups_plugin_population_loader_group_assignments-41"><a href="#lst-groups_plugin_population_loader_group_assignments-41"></a>    <span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<section id="telework-manager" class="level3" data-number="10.10.1">
<h3 data-number="10.10.1" class="anchored" data-anchor-id="telework-manager"><span class="header-section-number">10.10.1</span> Telework manager</h3>
<p>The TeleworkManager actor, in <a href="#lst-groups_plugin_telework_manager_init">Code Block&nbsp;<span>10.11</span></a>, schedules a weekly review of school disease mitigation strategies. Note that the scheduling is through a passive plan, which indicates to the simulation that this plan should only be executed if there are active plans still remaining. Passive plans are generally used when there is a continuing task that is not driven directly by events. When active plans cease and only passive plans remain, the simulation halts since the passive plans are not reason enough to continue time flow.</p>
<div class="cell">
<div id="lst-groups_plugin_telework_manager_init" class="listing">
<p>Code Block&nbsp;10.11: The telework manager initializes by scheduling a telework status review for seven days from the start of the simulation.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_telework_manager_init" data-lst-cap="The telework manager initializes by scheduling a telework status review for seven days from the start of the simulation."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_telework_manager_init-1"><a href="#lst-groups_plugin_telework_manager_init-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">init</span><span class="op">(</span>ActorContext actorContext<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_telework_manager_init-2"><a href="#lst-groups_plugin_telework_manager_init-2"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">actorContext</span> <span class="op">=</span> actorContext<span class="op">;</span></span>
<span id="lst-groups_plugin_telework_manager_init-3"><a href="#lst-groups_plugin_telework_manager_init-3"></a>    <span class="fu">scheduleNextReview</span><span class="op">();</span></span>
<span id="lst-groups_plugin_telework_manager_init-4"><a href="#lst-groups_plugin_telework_manager_init-4"></a><span class="op">}</span></span>
<span id="lst-groups_plugin_telework_manager_init-5"><a href="#lst-groups_plugin_telework_manager_init-5"></a></span>
<span id="lst-groups_plugin_telework_manager_init-6"><a href="#lst-groups_plugin_telework_manager_init-6"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">scheduleNextReview</span><span class="op">()</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_telework_manager_init-7"><a href="#lst-groups_plugin_telework_manager_init-7"></a>    <span class="dt">double</span> planTime <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getTime</span><span class="op">()</span> <span class="op">+</span> reviewInterval<span class="op">;</span></span>
<span id="lst-groups_plugin_telework_manager_init-8"><a href="#lst-groups_plugin_telework_manager_init-8"></a>    Plan<span class="op">&lt;</span>ActorContext<span class="op">&gt;</span> plan <span class="op">=</span> Plan<span class="op">.</span><span class="fu">builder</span><span class="op">(</span>ActorContext<span class="op">.</span><span class="fu">class</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_telework_manager_init-9"><a href="#lst-groups_plugin_telework_manager_init-9"></a>            <span class="op">.</span><span class="fu">setCallbackConsumer</span><span class="op">(</span><span class="kw">this</span><span class="op">::</span>reviewTeleworkStatus<span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_telework_manager_init-10"><a href="#lst-groups_plugin_telework_manager_init-10"></a>            <span class="op">.</span><span class="fu">setActive</span><span class="op">(</span><span class="kw">false</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_telework_manager_init-11"><a href="#lst-groups_plugin_telework_manager_init-11"></a>            <span class="op">.</span><span class="fu">setTime</span><span class="op">(</span>planTime<span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_telework_manager_init-12"><a href="#lst-groups_plugin_telework_manager_init-12"></a>            <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_telework_manager_init-13"><a href="#lst-groups_plugin_telework_manager_init-13"></a></span>
<span id="lst-groups_plugin_telework_manager_init-14"><a href="#lst-groups_plugin_telework_manager_init-14"></a>    actorContext<span class="op">.</span><span class="fu">addPlan</span><span class="op">(</span>plan<span class="op">);</span></span>
<span id="lst-groups_plugin_telework_manager_init-15"><a href="#lst-groups_plugin_telework_manager_init-15"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>The review process (<a href="#lst-groups_plugin_telework_review_status">Code Block&nbsp;<span>10.12</span></a>) continues until a disease threshold has been reached. At that point, the telework manager randomly determines which work groups will be in telework mode. Note that there is no returning from this mode and there is no further evolution of the telework mode even after the disease wanes.</p>
<div class="cell">
<div id="lst-groups_plugin_telework_review_status" class="listing">
<p>Code Block&nbsp;10.12: The telework manager schedules a review every seven days until a threshold of infections is reached. Once the threshold is achieved, work places are randomly selected to use telework until the end of the simulation.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_telework_review_status" data-lst-cap="The telework manager schedules a review every seven days until a threshold of infections is reached.  Once the threshold is achieved, work places are randomly selected to use telework until the end of the simulation."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_telework_review_status-1"><a href="#lst-groups_plugin_telework_review_status-1"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">reviewTeleworkStatus</span><span class="op">(</span>ActorContext actorContext<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_telework_review_status-2"><a href="#lst-groups_plugin_telework_review_status-2"></a>    StochasticsDataManager stochasticsDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>StochasticsDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_telework_review_status-3"><a href="#lst-groups_plugin_telework_review_status-3"></a>    RandomGenerator randomGenerator <span class="op">=</span> stochasticsDataManager<span class="op">.</span><span class="fu">getRandomGenerator</span><span class="op">();</span></span>
<span id="lst-groups_plugin_telework_review_status-4"><a href="#lst-groups_plugin_telework_review_status-4"></a>    PeopleDataManager peopleDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>PeopleDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_telework_review_status-5"><a href="#lst-groups_plugin_telework_review_status-5"></a>    PersonPropertiesDataManager personPropertiesDataManager <span class="op">=</span> actorContext</span>
<span id="lst-groups_plugin_telework_review_status-6"><a href="#lst-groups_plugin_telework_review_status-6"></a>            <span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>PersonPropertiesDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_telework_review_status-7"><a href="#lst-groups_plugin_telework_review_status-7"></a>    GroupsDataManager groupsDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>GroupsDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_telework_review_status-8"><a href="#lst-groups_plugin_telework_review_status-8"></a>    GlobalPropertiesDataManager globalPropertiesDataManager <span class="op">=</span> actorContext</span>
<span id="lst-groups_plugin_telework_review_status-9"><a href="#lst-groups_plugin_telework_review_status-9"></a>            <span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>GlobalPropertiesDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_telework_review_status-10"><a href="#lst-groups_plugin_telework_review_status-10"></a>    <span class="dt">double</span> threshold <span class="op">=</span> globalPropertiesDataManager</span>
<span id="lst-groups_plugin_telework_review_status-11"><a href="#lst-groups_plugin_telework_review_status-11"></a>            <span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">TELEWORK_INFECTION_THRESHOLD</span><span class="op">);</span></span>
<span id="lst-groups_plugin_telework_review_status-12"><a href="#lst-groups_plugin_telework_review_status-12"></a>    <span class="dt">double</span> teleworkProbability <span class="op">=</span> globalPropertiesDataManager</span>
<span id="lst-groups_plugin_telework_review_status-13"><a href="#lst-groups_plugin_telework_review_status-13"></a>            <span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">TELEWORK_PROBABILTY</span><span class="op">);</span></span>
<span id="lst-groups_plugin_telework_review_status-14"><a href="#lst-groups_plugin_telework_review_status-14"></a></span>
<span id="lst-groups_plugin_telework_review_status-15"><a href="#lst-groups_plugin_telework_review_status-15"></a>    <span class="dt">int</span> infectiousCount <span class="op">=</span> personPropertiesDataManager<span class="op">.</span><span class="fu">getPersonCountForPropertyValue</span><span class="op">(</span>PersonProperty<span class="op">.</span><span class="fu">DISEASE_STATE</span><span class="op">,</span></span>
<span id="lst-groups_plugin_telework_review_status-16"><a href="#lst-groups_plugin_telework_review_status-16"></a>            DiseaseState<span class="op">.</span><span class="fu">INFECTIOUS</span><span class="op">);</span></span>
<span id="lst-groups_plugin_telework_review_status-17"><a href="#lst-groups_plugin_telework_review_status-17"></a>    <span class="dt">int</span> populationCount <span class="op">=</span> peopleDataManager<span class="op">.</span><span class="fu">getPopulationCount</span><span class="op">();</span></span>
<span id="lst-groups_plugin_telework_review_status-18"><a href="#lst-groups_plugin_telework_review_status-18"></a></span>
<span id="lst-groups_plugin_telework_review_status-19"><a href="#lst-groups_plugin_telework_review_status-19"></a>    <span class="dt">double</span> infectiousFraction <span class="op">=</span> infectiousCount<span class="op">;</span></span>
<span id="lst-groups_plugin_telework_review_status-20"><a href="#lst-groups_plugin_telework_review_status-20"></a>    infectiousFraction <span class="op">/=</span> populationCount<span class="op">;</span></span>
<span id="lst-groups_plugin_telework_review_status-21"><a href="#lst-groups_plugin_telework_review_status-21"></a></span>
<span id="lst-groups_plugin_telework_review_status-22"><a href="#lst-groups_plugin_telework_review_status-22"></a>    <span class="cf">if</span> <span class="op">(</span>infectiousFraction <span class="op">&gt;=</span> threshold<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_telework_review_status-23"><a href="#lst-groups_plugin_telework_review_status-23"></a>        <span class="bu">List</span><span class="op">&lt;</span>GroupId<span class="op">&gt;</span> workGroupIds <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">getGroupsForGroupType</span><span class="op">(</span>GroupType<span class="op">.</span><span class="fu">WORK</span><span class="op">);</span></span>
<span id="lst-groups_plugin_telework_review_status-24"><a href="#lst-groups_plugin_telework_review_status-24"></a>        <span class="cf">for</span> <span class="op">(</span>GroupId groupId <span class="op">:</span> workGroupIds<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_telework_review_status-25"><a href="#lst-groups_plugin_telework_review_status-25"></a>            <span class="cf">if</span> <span class="op">(</span>randomGenerator<span class="op">.</span><span class="fu">nextDouble</span><span class="op">()</span> <span class="op">&lt;</span> teleworkProbability<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_telework_review_status-26"><a href="#lst-groups_plugin_telework_review_status-26"></a>                groupsDataManager<span class="op">.</span><span class="fu">setGroupPropertyValue</span><span class="op">(</span>groupId<span class="op">,</span> GroupProperty<span class="op">.</span><span class="fu">TELEWORK</span><span class="op">,</span> <span class="kw">true</span><span class="op">);</span></span>
<span id="lst-groups_plugin_telework_review_status-27"><a href="#lst-groups_plugin_telework_review_status-27"></a>            <span class="op">}</span></span>
<span id="lst-groups_plugin_telework_review_status-28"><a href="#lst-groups_plugin_telework_review_status-28"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_telework_review_status-29"><a href="#lst-groups_plugin_telework_review_status-29"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_telework_review_status-30"><a href="#lst-groups_plugin_telework_review_status-30"></a>        <span class="fu">scheduleNextReview</span><span class="op">();</span></span>
<span id="lst-groups_plugin_telework_review_status-31"><a href="#lst-groups_plugin_telework_review_status-31"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_telework_review_status-32"><a href="#lst-groups_plugin_telework_review_status-32"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="school-manager" class="level3" data-number="10.10.2">
<h3 data-number="10.10.2" class="anchored" data-anchor-id="school-manager"><span class="header-section-number">10.10.2</span> School manager</h3>
<p>The SchoolManager actor (<a href="#lst-groups_plugin_school_manager_init">Code Block&nbsp;<span>10.13</span></a>) initializes by establishing various values derived from fixed global properties and then scheduling a weekly review of all schools.</p>
<div class="cell">
<div id="lst-groups_plugin_school_manager_init" class="listing">
<p>Code Block&nbsp;10.13: The school manager initializes by establishing some property constants and planning school status review for seven days after the simulation starts.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_school_manager_init" data-lst-cap="The school manager initializes by establishing some property constants and planning school status review for seven days after the simulation starts."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_school_manager_init-1"><a href="#lst-groups_plugin_school_manager_init-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">init</span><span class="op">(</span>ActorContext actorContext<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_init-2"><a href="#lst-groups_plugin_school_manager_init-2"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">actorContext</span> <span class="op">=</span> actorContext<span class="op">;</span></span>
<span id="lst-groups_plugin_school_manager_init-3"><a href="#lst-groups_plugin_school_manager_init-3"></a>    personPropertiesDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>PersonPropertiesDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_init-4"><a href="#lst-groups_plugin_school_manager_init-4"></a>    groupsDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>GroupsDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_init-5"><a href="#lst-groups_plugin_school_manager_init-5"></a>    GlobalPropertiesDataManager globalPropertiesDataManager <span class="op">=</span> actorContext</span>
<span id="lst-groups_plugin_school_manager_init-6"><a href="#lst-groups_plugin_school_manager_init-6"></a>            <span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>GlobalPropertiesDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_init-7"><a href="#lst-groups_plugin_school_manager_init-7"></a>    cohortThreshold <span class="op">=</span> globalPropertiesDataManager</span>
<span id="lst-groups_plugin_school_manager_init-8"><a href="#lst-groups_plugin_school_manager_init-8"></a>            <span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">SCHOOL_COHORT_INFECTION_THRESHOLD</span><span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_init-9"><a href="#lst-groups_plugin_school_manager_init-9"></a>    closureThreshold <span class="op">=</span> globalPropertiesDataManager</span>
<span id="lst-groups_plugin_school_manager_init-10"><a href="#lst-groups_plugin_school_manager_init-10"></a>            <span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">SCHOOL_CLOSURE_INFECTION_THRESHOLD</span><span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_init-11"><a href="#lst-groups_plugin_school_manager_init-11"></a>    <span class="fu">planNextReview</span><span class="op">();</span></span>
<span id="lst-groups_plugin_school_manager_init-12"><a href="#lst-groups_plugin_school_manager_init-12"></a><span class="op">}</span></span>
<span id="lst-groups_plugin_school_manager_init-13"><a href="#lst-groups_plugin_school_manager_init-13"></a></span>
<span id="lst-groups_plugin_school_manager_init-14"><a href="#lst-groups_plugin_school_manager_init-14"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">planNextReview</span><span class="op">()</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_init-15"><a href="#lst-groups_plugin_school_manager_init-15"></a>    <span class="dt">double</span> planTime <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getTime</span><span class="op">()</span> <span class="op">+</span> reviewInterval<span class="op">;</span></span>
<span id="lst-groups_plugin_school_manager_init-16"><a href="#lst-groups_plugin_school_manager_init-16"></a>    Plan<span class="op">&lt;</span>ActorContext<span class="op">&gt;</span> plan <span class="op">=</span> Plan<span class="op">.</span><span class="fu">builder</span><span class="op">(</span>ActorContext<span class="op">.</span><span class="fu">class</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_school_manager_init-17"><a href="#lst-groups_plugin_school_manager_init-17"></a>            <span class="op">.</span><span class="fu">setCallbackConsumer</span><span class="op">(</span><span class="kw">this</span><span class="op">::</span>reviewSchools<span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_school_manager_init-18"><a href="#lst-groups_plugin_school_manager_init-18"></a>            <span class="op">.</span><span class="fu">setActive</span><span class="op">(</span><span class="kw">false</span><span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_school_manager_init-19"><a href="#lst-groups_plugin_school_manager_init-19"></a>            <span class="op">.</span><span class="fu">setTime</span><span class="op">(</span>planTime<span class="op">)</span><span class="co">//</span></span>
<span id="lst-groups_plugin_school_manager_init-20"><a href="#lst-groups_plugin_school_manager_init-20"></a>            <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_school_manager_init-21"><a href="#lst-groups_plugin_school_manager_init-21"></a>    actorContext<span class="op">.</span><span class="fu">addPlan</span><span class="op">(</span>plan<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_init-22"><a href="#lst-groups_plugin_school_manager_init-22"></a><span class="op">}</span></span>
<span id="lst-groups_plugin_school_manager_init-23"><a href="#lst-groups_plugin_school_manager_init-23"></a></span>
<span id="lst-groups_plugin_school_manager_init-24"><a href="#lst-groups_plugin_school_manager_init-24"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">reviewSchools</span><span class="op">(</span>ActorContext actorContext<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_init-25"><a href="#lst-groups_plugin_school_manager_init-25"></a>    <span class="bu">List</span><span class="op">&lt;</span>GroupId<span class="op">&gt;</span> schoolGroupIds <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">getGroupsForGroupType</span><span class="op">(</span>GroupType<span class="op">.</span><span class="fu">SCHOOL</span><span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_init-26"><a href="#lst-groups_plugin_school_manager_init-26"></a>    <span class="cf">for</span> <span class="op">(</span>GroupId groupId <span class="op">:</span> schoolGroupIds<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_init-27"><a href="#lst-groups_plugin_school_manager_init-27"></a>        <span class="fu">reviewSchool</span><span class="op">(</span>groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_init-28"><a href="#lst-groups_plugin_school_manager_init-28"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_school_manager_init-29"><a href="#lst-groups_plugin_school_manager_init-29"></a>    <span class="fu">planNextReview</span><span class="op">();</span></span>
<span id="lst-groups_plugin_school_manager_init-30"><a href="#lst-groups_plugin_school_manager_init-30"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>The review of each school group is shown in <a href="#lst-groups_plugin_school_manager_review_school">Code Block&nbsp;<span>10.14</span></a>. The fraction of the school’s students who are infectious is calculated. Depending on the current state of the group (OPEN, COHORT, CLOSED) the group may move to the next state. If the group moves from OPEN to COHORT (<a href="#lst-groups_plugin_school_manager_split_schools">Code Block&nbsp;<span>10.15</span></a>), a new group is formed and half of the students are moved into the new group. Both groups are then marked as COHORT groups. If the group moves from COHORT to CLOSED (<a href="#lst-groups_plugin_school_manager_close_schools">Code Block&nbsp;<span>10.16</span></a>), all students are removed from the group.</p>
<div class="cell">
<div id="lst-groups_plugin_school_manager_review_school" class="listing">
<p>Code Block&nbsp;10.14: Each school is reviewed on a weekly basis. As the fraction of students who are infected increases, the school transitions from OPEN to COHORT to CLOSED.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_school_manager_review_school" data-lst-cap="Each school is reviewed on a weekly basis.  As the fraction of students who are infected increases, the school transitions from OPEN to COHORT to CLOSED."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_school_manager_review_school-1"><a href="#lst-groups_plugin_school_manager_review_school-1"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">reviewSchool</span><span class="op">(</span>GroupId groupId<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_review_school-2"><a href="#lst-groups_plugin_school_manager_review_school-2"></a></span>
<span id="lst-groups_plugin_school_manager_review_school-3"><a href="#lst-groups_plugin_school_manager_review_school-3"></a>    <span class="dt">int</span> infectiousCount <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="lst-groups_plugin_school_manager_review_school-4"><a href="#lst-groups_plugin_school_manager_review_school-4"></a>    <span class="bu">List</span><span class="op">&lt;</span>PersonId<span class="op">&gt;</span> peopleForGroup <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">getPeopleForGroup</span><span class="op">(</span>groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_review_school-5"><a href="#lst-groups_plugin_school_manager_review_school-5"></a>    <span class="cf">for</span> <span class="op">(</span>PersonId personId <span class="op">:</span> peopleForGroup<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_review_school-6"><a href="#lst-groups_plugin_school_manager_review_school-6"></a>        DiseaseState diseaseState <span class="op">=</span> personPropertiesDataManager<span class="op">.</span><span class="fu">getPersonPropertyValue</span><span class="op">(</span>personId<span class="op">,</span></span>
<span id="lst-groups_plugin_school_manager_review_school-7"><a href="#lst-groups_plugin_school_manager_review_school-7"></a>                PersonProperty<span class="op">.</span><span class="fu">DISEASE_STATE</span><span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_review_school-8"><a href="#lst-groups_plugin_school_manager_review_school-8"></a>        <span class="cf">if</span> <span class="op">(</span>diseaseState <span class="op">==</span> DiseaseState<span class="op">.</span><span class="fu">INFECTIOUS</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_review_school-9"><a href="#lst-groups_plugin_school_manager_review_school-9"></a>            infectiousCount<span class="op">++;</span></span>
<span id="lst-groups_plugin_school_manager_review_school-10"><a href="#lst-groups_plugin_school_manager_review_school-10"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_school_manager_review_school-11"><a href="#lst-groups_plugin_school_manager_review_school-11"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_school_manager_review_school-12"><a href="#lst-groups_plugin_school_manager_review_school-12"></a></span>
<span id="lst-groups_plugin_school_manager_review_school-13"><a href="#lst-groups_plugin_school_manager_review_school-13"></a>    <span class="dt">double</span> infectiousFraction <span class="op">=</span> infectiousCount<span class="op">;</span></span>
<span id="lst-groups_plugin_school_manager_review_school-14"><a href="#lst-groups_plugin_school_manager_review_school-14"></a>    <span class="cf">if</span> <span class="op">(!</span>peopleForGroup<span class="op">.</span><span class="fu">isEmpty</span><span class="op">())</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_review_school-15"><a href="#lst-groups_plugin_school_manager_review_school-15"></a>        infectiousFraction <span class="op">/=</span> peopleForGroup<span class="op">.</span><span class="fu">size</span><span class="op">();</span></span>
<span id="lst-groups_plugin_school_manager_review_school-16"><a href="#lst-groups_plugin_school_manager_review_school-16"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_school_manager_review_school-17"><a href="#lst-groups_plugin_school_manager_review_school-17"></a></span>
<span id="lst-groups_plugin_school_manager_review_school-18"><a href="#lst-groups_plugin_school_manager_review_school-18"></a>    SchoolStatus schoolStatus <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">getGroupPropertyValue</span><span class="op">(</span>groupId<span class="op">,</span> GroupProperty<span class="op">.</span><span class="fu">SCHOOL_STATUS</span><span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_review_school-19"><a href="#lst-groups_plugin_school_manager_review_school-19"></a></span>
<span id="lst-groups_plugin_school_manager_review_school-20"><a href="#lst-groups_plugin_school_manager_review_school-20"></a>    <span class="cf">switch</span> <span class="op">(</span>schoolStatus<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_review_school-21"><a href="#lst-groups_plugin_school_manager_review_school-21"></a>    <span class="cf">case</span> OPEN<span class="op">:</span></span>
<span id="lst-groups_plugin_school_manager_review_school-22"><a href="#lst-groups_plugin_school_manager_review_school-22"></a>        <span class="cf">if</span> <span class="op">(</span>infectiousFraction <span class="op">&gt;=</span> cohortThreshold<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_review_school-23"><a href="#lst-groups_plugin_school_manager_review_school-23"></a>            <span class="fu">splitSchoolIntoCohorts</span><span class="op">(</span>groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_review_school-24"><a href="#lst-groups_plugin_school_manager_review_school-24"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_school_manager_review_school-25"><a href="#lst-groups_plugin_school_manager_review_school-25"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="lst-groups_plugin_school_manager_review_school-26"><a href="#lst-groups_plugin_school_manager_review_school-26"></a>    <span class="cf">case</span> COHORT<span class="op">:</span></span>
<span id="lst-groups_plugin_school_manager_review_school-27"><a href="#lst-groups_plugin_school_manager_review_school-27"></a>        <span class="cf">if</span> <span class="op">(</span>infectiousFraction <span class="op">&gt;=</span> closureThreshold<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_review_school-28"><a href="#lst-groups_plugin_school_manager_review_school-28"></a>            <span class="fu">closeSchool</span><span class="op">(</span>groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_review_school-29"><a href="#lst-groups_plugin_school_manager_review_school-29"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_school_manager_review_school-30"><a href="#lst-groups_plugin_school_manager_review_school-30"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="lst-groups_plugin_school_manager_review_school-31"><a href="#lst-groups_plugin_school_manager_review_school-31"></a>    <span class="cf">case</span> CLOSED<span class="op">:</span></span>
<span id="lst-groups_plugin_school_manager_review_school-32"><a href="#lst-groups_plugin_school_manager_review_school-32"></a>        <span class="co">// do nothing</span></span>
<span id="lst-groups_plugin_school_manager_review_school-33"><a href="#lst-groups_plugin_school_manager_review_school-33"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="lst-groups_plugin_school_manager_review_school-34"><a href="#lst-groups_plugin_school_manager_review_school-34"></a>    <span class="kw">default</span><span class="op">:</span></span>
<span id="lst-groups_plugin_school_manager_review_school-35"><a href="#lst-groups_plugin_school_manager_review_school-35"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">RuntimeException</span><span class="op">(</span><span class="st">"unhandled case "</span> <span class="op">+</span> schoolStatus<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_review_school-36"><a href="#lst-groups_plugin_school_manager_review_school-36"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_school_manager_review_school-37"><a href="#lst-groups_plugin_school_manager_review_school-37"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div id="lst-groups_plugin_school_manager_split_schools" class="listing">
<p>Code Block&nbsp;10.15: When a school moves to COHORT status, a new group is added to the simulation and half of the students move to this new group.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_school_manager_split_schools" data-lst-cap="When a school moves to COHORT status, a new group is added to the simulation and half of the students move to this new group."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_school_manager_split_schools-1"><a href="#lst-groups_plugin_school_manager_split_schools-1"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">splitSchoolIntoCohorts</span><span class="op">(</span>GroupId groupId<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-2"><a href="#lst-groups_plugin_school_manager_split_schools-2"></a>    GroupConstructionInfo groupConstructionInfo <span class="op">=</span> GroupConstructionInfo<span class="op">.</span><span class="fu">builder</span><span class="op">().</span><span class="fu">setGroupTypeId</span><span class="op">(</span>GroupType<span class="op">.</span><span class="fu">SCHOOL</span><span class="op">)</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-3"><a href="#lst-groups_plugin_school_manager_split_schools-3"></a>            <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-4"><a href="#lst-groups_plugin_school_manager_split_schools-4"></a>    GroupId newGroupId <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">addGroup</span><span class="op">(</span>groupConstructionInfo<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-5"><a href="#lst-groups_plugin_school_manager_split_schools-5"></a></span>
<span id="lst-groups_plugin_school_manager_split_schools-6"><a href="#lst-groups_plugin_school_manager_split_schools-6"></a>    <span class="bu">List</span><span class="op">&lt;</span>PersonId<span class="op">&gt;</span> peopleForGroup <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">getPeopleForGroup</span><span class="op">(</span>groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-7"><a href="#lst-groups_plugin_school_manager_split_schools-7"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> peopleForGroup<span class="op">.</span><span class="fu">size</span><span class="op">();</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-8"><a href="#lst-groups_plugin_school_manager_split_schools-8"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-9"><a href="#lst-groups_plugin_school_manager_split_schools-9"></a>            PersonId personId <span class="op">=</span> peopleForGroup<span class="op">.</span><span class="fu">get</span><span class="op">(</span>i<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-10"><a href="#lst-groups_plugin_school_manager_split_schools-10"></a>            groupsDataManager<span class="op">.</span><span class="fu">removePersonFromGroup</span><span class="op">(</span>personId<span class="op">,</span> groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-11"><a href="#lst-groups_plugin_school_manager_split_schools-11"></a>            groupsDataManager<span class="op">.</span><span class="fu">addPersonToGroup</span><span class="op">(</span>personId<span class="op">,</span> newGroupId<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-12"><a href="#lst-groups_plugin_school_manager_split_schools-12"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-13"><a href="#lst-groups_plugin_school_manager_split_schools-13"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-14"><a href="#lst-groups_plugin_school_manager_split_schools-14"></a></span>
<span id="lst-groups_plugin_school_manager_split_schools-15"><a href="#lst-groups_plugin_school_manager_split_schools-15"></a>    groupsDataManager<span class="op">.</span><span class="fu">setGroupPropertyValue</span><span class="op">(</span>newGroupId<span class="op">,</span> GroupProperty<span class="op">.</span><span class="fu">SCHOOL_STATUS</span><span class="op">,</span> SchoolStatus<span class="op">.</span><span class="fu">COHORT</span><span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-16"><a href="#lst-groups_plugin_school_manager_split_schools-16"></a>    groupsDataManager<span class="op">.</span><span class="fu">setGroupPropertyValue</span><span class="op">(</span>groupId<span class="op">,</span> GroupProperty<span class="op">.</span><span class="fu">SCHOOL_STATUS</span><span class="op">,</span> SchoolStatus<span class="op">.</span><span class="fu">COHORT</span><span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_split_schools-17"><a href="#lst-groups_plugin_school_manager_split_schools-17"></a></span>
<span id="lst-groups_plugin_school_manager_split_schools-18"><a href="#lst-groups_plugin_school_manager_split_schools-18"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div id="lst-groups_plugin_school_manager_close_schools" class="listing">
<p>Code Block&nbsp;10.16: When a school is closed, all the students are removed from the school group so that infection can no longer spread via school-based contact.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_school_manager_close_schools" data-lst-cap="When a school is closed, all the students are removed from the school group so that infection can no longer spread via school-based contact."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_school_manager_close_schools-1"><a href="#lst-groups_plugin_school_manager_close_schools-1"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">closeSchool</span><span class="op">(</span>GroupId groupId<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_close_schools-2"><a href="#lst-groups_plugin_school_manager_close_schools-2"></a>    groupsDataManager<span class="op">.</span><span class="fu">setGroupPropertyValue</span><span class="op">(</span>groupId<span class="op">,</span> GroupProperty<span class="op">.</span><span class="fu">SCHOOL_STATUS</span><span class="op">,</span> SchoolStatus<span class="op">.</span><span class="fu">CLOSED</span><span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_close_schools-3"><a href="#lst-groups_plugin_school_manager_close_schools-3"></a>    <span class="bu">List</span><span class="op">&lt;</span>PersonId<span class="op">&gt;</span> people <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">getPeopleForGroup</span><span class="op">(</span>groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_close_schools-4"><a href="#lst-groups_plugin_school_manager_close_schools-4"></a>    <span class="cf">for</span> <span class="op">(</span>PersonId personId <span class="op">:</span> people<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_school_manager_close_schools-5"><a href="#lst-groups_plugin_school_manager_close_schools-5"></a>        groupsDataManager<span class="op">.</span><span class="fu">removePersonFromGroup</span><span class="op">(</span>personId<span class="op">,</span> groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_school_manager_close_schools-6"><a href="#lst-groups_plugin_school_manager_close_schools-6"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_school_manager_close_schools-7"><a href="#lst-groups_plugin_school_manager_close_schools-7"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="infection-manager" class="level3" data-number="10.10.3">
<h3 data-number="10.10.3" class="anchored" data-anchor-id="infection-manager"><span class="header-section-number">10.10.3</span> Infection Manager</h3>
<p>The InfectionManager actor, in <a href="#lst-groups_plugin_infection_manager_init">Code Block&nbsp;<span>10.17</span></a>, first determines various values from the fixed global properties that will be used to manage infections. The most important calculation is to determine the length of time between infectious contacts as a function of the global R0 value and the expected number of days a person will be infectious. It then selects a small set of adults to infect during first day of the simulation. Infecting a person (<a href="#lst-groups_plugin_infection_manager_infect_person">Code Block&nbsp;<span>10.18</span></a>) first requires the manager to determine the number of days of the infection for the particular person and then schedule infectious contact times for that person. At the end of the infectious contacts the manager schedules the transition of the person from infectious to recovered.</p>
<div class="cell">
<div id="lst-groups_plugin_infection_manager_init" class="listing">
<p>Code Block&nbsp;10.17: The infection manager initializes by infecting the initially infected people in the first day.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_infection_manager_init" data-lst-cap="The infection manager initializes by infecting the initially infected people in the first day."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_infection_manager_init-1"><a href="#lst-groups_plugin_infection_manager_init-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">init</span><span class="op">(</span>ActorContext actorContext<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_init-2"><a href="#lst-groups_plugin_infection_manager_init-2"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">actorContext</span> <span class="op">=</span> actorContext<span class="op">;</span></span>
<span id="lst-groups_plugin_infection_manager_init-3"><a href="#lst-groups_plugin_infection_manager_init-3"></a></span>
<span id="lst-groups_plugin_infection_manager_init-4"><a href="#lst-groups_plugin_infection_manager_init-4"></a>    StochasticsDataManager stochasticsDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>StochasticsDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-5"><a href="#lst-groups_plugin_infection_manager_init-5"></a>    randomGenerator <span class="op">=</span> stochasticsDataManager<span class="op">.</span><span class="fu">getRandomGenerator</span><span class="op">();</span></span>
<span id="lst-groups_plugin_infection_manager_init-6"><a href="#lst-groups_plugin_infection_manager_init-6"></a>    <span class="bu">Random</span> random <span class="op">=</span> <span class="kw">new</span> <span class="bu">Random</span><span class="op">(</span>randomGenerator<span class="op">.</span><span class="fu">nextLong</span><span class="op">());</span></span>
<span id="lst-groups_plugin_infection_manager_init-7"><a href="#lst-groups_plugin_infection_manager_init-7"></a></span>
<span id="lst-groups_plugin_infection_manager_init-8"><a href="#lst-groups_plugin_infection_manager_init-8"></a>    groupsDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>GroupsDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-9"><a href="#lst-groups_plugin_infection_manager_init-9"></a>    GlobalPropertiesDataManager globalPropertiesDataManager <span class="op">=</span> actorContext</span>
<span id="lst-groups_plugin_infection_manager_init-10"><a href="#lst-groups_plugin_infection_manager_init-10"></a>            <span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>GlobalPropertiesDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-11"><a href="#lst-groups_plugin_infection_manager_init-11"></a>    personPropertiesDataManager <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getDataManager</span><span class="op">(</span>PersonPropertiesDataManager<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-12"><a href="#lst-groups_plugin_infection_manager_init-12"></a>    <span class="bu">List</span><span class="op">&lt;</span>PersonId<span class="op">&gt;</span> susceptiblePeople <span class="op">=</span> personPropertiesDataManager</span>
<span id="lst-groups_plugin_infection_manager_init-13"><a href="#lst-groups_plugin_infection_manager_init-13"></a>            <span class="op">.</span><span class="fu">getPeopleWithPropertyValue</span><span class="op">(</span>PersonProperty<span class="op">.</span><span class="fu">DISEASE_STATE</span><span class="op">,</span> DiseaseState<span class="op">.</span><span class="fu">SUSCEPTIBLE</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-14"><a href="#lst-groups_plugin_infection_manager_init-14"></a>    <span class="bu">List</span><span class="op">&lt;</span>PersonId<span class="op">&gt;</span> susceptibleAdults <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="lst-groups_plugin_infection_manager_init-15"><a href="#lst-groups_plugin_infection_manager_init-15"></a>    <span class="cf">for</span> <span class="op">(</span>PersonId personId <span class="op">:</span> susceptiblePeople<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_init-16"><a href="#lst-groups_plugin_infection_manager_init-16"></a>        <span class="dt">int</span> age <span class="op">=</span> personPropertiesDataManager<span class="op">.</span><span class="fu">getPersonPropertyValue</span><span class="op">(</span>personId<span class="op">,</span> PersonProperty<span class="op">.</span><span class="fu">AGE</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-17"><a href="#lst-groups_plugin_infection_manager_init-17"></a>        <span class="cf">if</span> <span class="op">(</span>age <span class="op">&gt;</span> <span class="dv">18</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_init-18"><a href="#lst-groups_plugin_infection_manager_init-18"></a>            susceptibleAdults<span class="op">.</span><span class="fu">add</span><span class="op">(</span>personId<span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-19"><a href="#lst-groups_plugin_infection_manager_init-19"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_infection_manager_init-20"><a href="#lst-groups_plugin_infection_manager_init-20"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_infection_manager_init-21"><a href="#lst-groups_plugin_infection_manager_init-21"></a></span>
<span id="lst-groups_plugin_infection_manager_init-22"><a href="#lst-groups_plugin_infection_manager_init-22"></a>    <span class="bu">Collections</span><span class="op">.</span><span class="fu">shuffle</span><span class="op">(</span>susceptibleAdults<span class="op">,</span> random<span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-23"><a href="#lst-groups_plugin_infection_manager_init-23"></a></span>
<span id="lst-groups_plugin_infection_manager_init-24"><a href="#lst-groups_plugin_infection_manager_init-24"></a>    minInfectiousPeriod <span class="op">=</span> globalPropertiesDataManager<span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">MIN_INFECTIOUS_PERIOD</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-25"><a href="#lst-groups_plugin_infection_manager_init-25"></a>    maxInfectiousPeriod <span class="op">=</span> globalPropertiesDataManager<span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">MAX_INFECTIOUS_PERIOD</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-26"><a href="#lst-groups_plugin_infection_manager_init-26"></a>    <span class="dt">double</span> r0 <span class="op">=</span> globalPropertiesDataManager<span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">R0</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-27"><a href="#lst-groups_plugin_infection_manager_init-27"></a>    infectionInterval <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span> <span class="op">(</span>minInfectiousPeriod <span class="op">+</span> maxInfectiousPeriod<span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="dv">2</span> <span class="op">*</span> r0<span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-28"><a href="#lst-groups_plugin_infection_manager_init-28"></a></span>
<span id="lst-groups_plugin_infection_manager_init-29"><a href="#lst-groups_plugin_infection_manager_init-29"></a>    <span class="dt">int</span> initialInfections <span class="op">=</span> globalPropertiesDataManager<span class="op">.</span><span class="fu">getGlobalPropertyValue</span><span class="op">(</span>GlobalProperty<span class="op">.</span><span class="fu">INITIAL_INFECTIONS</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-30"><a href="#lst-groups_plugin_infection_manager_init-30"></a>    initialInfections <span class="op">=</span> FastMath<span class="op">.</span><span class="fu">min</span><span class="op">(</span>initialInfections<span class="op">,</span> susceptibleAdults<span class="op">.</span><span class="fu">size</span><span class="op">());</span></span>
<span id="lst-groups_plugin_infection_manager_init-31"><a href="#lst-groups_plugin_infection_manager_init-31"></a></span>
<span id="lst-groups_plugin_infection_manager_init-32"><a href="#lst-groups_plugin_infection_manager_init-32"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> initialInfections<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_init-33"><a href="#lst-groups_plugin_infection_manager_init-33"></a>        PersonId personId <span class="op">=</span> susceptibleAdults<span class="op">.</span><span class="fu">get</span><span class="op">(</span>i<span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-34"><a href="#lst-groups_plugin_infection_manager_init-34"></a>        <span class="dt">double</span> planTime <span class="op">=</span> randomGenerator<span class="op">.</span><span class="fu">nextDouble</span><span class="op">()</span> <span class="op">*</span> <span class="fl">0.5</span> <span class="op">+</span> <span class="fl">0.25</span><span class="op">;</span></span>
<span id="lst-groups_plugin_infection_manager_init-35"><a href="#lst-groups_plugin_infection_manager_init-35"></a>        actorContext<span class="op">.</span><span class="fu">addPlan</span><span class="op">((</span>c<span class="op">)</span> <span class="op">-&gt;</span> <span class="fu">infectPerson</span><span class="op">(</span>personId<span class="op">),</span> planTime<span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_init-36"><a href="#lst-groups_plugin_infection_manager_init-36"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_infection_manager_init-37"><a href="#lst-groups_plugin_infection_manager_init-37"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div id="lst-groups_plugin_infection_manager_infect_person" class="listing">
<p>Code Block&nbsp;10.18: When a person is infected, the number of possible infectious contacts is determined and planned. After the last infectious contact, the person is scheduled to become recovered.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_infection_manager_infect_person" data-lst-cap="When a person is infected, the number of possible infectious contacts is determined and planned.  After the last infectious contact, the person is scheduled to become recovered."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_infection_manager_infect_person-1"><a href="#lst-groups_plugin_infection_manager_infect_person-1"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">infectPerson</span><span class="op">(</span>PersonId personId<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_infect_person-2"><a href="#lst-groups_plugin_infection_manager_infect_person-2"></a>    personPropertiesDataManager<span class="op">.</span><span class="fu">setPersonPropertyValue</span><span class="op">(</span>personId<span class="op">,</span> PersonProperty<span class="op">.</span><span class="fu">DISEASE_STATE</span><span class="op">,</span></span>
<span id="lst-groups_plugin_infection_manager_infect_person-3"><a href="#lst-groups_plugin_infection_manager_infect_person-3"></a>            DiseaseState<span class="op">.</span><span class="fu">INFECTIOUS</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_infect_person-4"><a href="#lst-groups_plugin_infection_manager_infect_person-4"></a>    <span class="dt">int</span> infectiousDays <span class="op">=</span> randomGenerator<span class="op">.</span><span class="fu">nextInt</span><span class="op">(</span>maxInfectiousPeriod <span class="op">-</span> minInfectiousPeriod<span class="op">)</span> <span class="op">+</span> minInfectiousPeriod<span class="op">;</span></span>
<span id="lst-groups_plugin_infection_manager_infect_person-5"><a href="#lst-groups_plugin_infection_manager_infect_person-5"></a>    <span class="dt">int</span> infectionCount <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span> FastMath<span class="op">.</span><span class="fu">round</span><span class="op">(((</span><span class="dt">double</span><span class="op">)</span> infectiousDays <span class="op">/</span> infectionInterval<span class="op">));</span></span>
<span id="lst-groups_plugin_infection_manager_infect_person-6"><a href="#lst-groups_plugin_infection_manager_infect_person-6"></a>    <span class="dt">double</span> planTime <span class="op">=</span> actorContext<span class="op">.</span><span class="fu">getTime</span><span class="op">();</span></span>
<span id="lst-groups_plugin_infection_manager_infect_person-7"><a href="#lst-groups_plugin_infection_manager_infect_person-7"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> infectionCount<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_infect_person-8"><a href="#lst-groups_plugin_infection_manager_infect_person-8"></a>        planTime <span class="op">+=</span> infectionInterval<span class="op">;</span></span>
<span id="lst-groups_plugin_infection_manager_infect_person-9"><a href="#lst-groups_plugin_infection_manager_infect_person-9"></a>        actorContext<span class="op">.</span><span class="fu">addPlan</span><span class="op">((</span>c<span class="op">)</span> <span class="op">-&gt;</span> <span class="fu">infectContact</span><span class="op">(</span>personId<span class="op">),</span> planTime<span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_infect_person-10"><a href="#lst-groups_plugin_infection_manager_infect_person-10"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_infection_manager_infect_person-11"><a href="#lst-groups_plugin_infection_manager_infect_person-11"></a>    actorContext<span class="op">.</span><span class="fu">addPlan</span><span class="op">((</span>c<span class="op">)</span> <span class="op">-&gt;</span> <span class="fu">endInfectiousness</span><span class="op">(</span>personId<span class="op">),</span> planTime<span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_infect_person-12"><a href="#lst-groups_plugin_infection_manager_infect_person-12"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>An infectious contact , <a href="#lst-groups_plugin_infection_manager_infect_contact">Code Block&nbsp;<span>10.19</span></a>, first selects a group at random from the person’s groups. A person to infect is selected from the group, excluding the person who is infecting. If such a person can be found and that person is susceptible then, barring mitigation, the susceptible person becomes infected and is immediately infectious. Cohort schools are mitigated by 50% and closed schools are 100% mitigated. Telework groups are mitigated by 50%.</p>
<div class="cell">
<div id="lst-groups_plugin_infection_manager_infect_contact" class="listing">
<p>Code Block&nbsp;10.19: The infection manager attempts to infect a susceptible person found in a randomly selected group associated with the currently infected person.</p>
<div class="sourceCode cell-code" id="lst-groups_plugin_infection_manager_infect_contact" data-lst-cap="The infection manager attempts to infect a susceptible person found in a randomly selected group associated with the currently infected person."><pre class="sourceCode numberSource java number-lines code-with-copy"><code class="sourceCode java"><span id="lst-groups_plugin_infection_manager_infect_contact-1"><a href="#lst-groups_plugin_infection_manager_infect_contact-1"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">infectContact</span><span class="op">(</span>PersonId personId<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-2"><a href="#lst-groups_plugin_infection_manager_infect_contact-2"></a>    <span class="bu">List</span><span class="op">&lt;</span>GroupId<span class="op">&gt;</span> groupsForPerson <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">getGroupsForPerson</span><span class="op">(</span>personId<span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-3"><a href="#lst-groups_plugin_infection_manager_infect_contact-3"></a>    GroupId groupId <span class="op">=</span> groupsForPerson<span class="op">.</span><span class="fu">get</span><span class="op">(</span>randomGenerator<span class="op">.</span><span class="fu">nextInt</span><span class="op">(</span>groupsForPerson<span class="op">.</span><span class="fu">size</span><span class="op">()));</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-4"><a href="#lst-groups_plugin_infection_manager_infect_contact-4"></a></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-5"><a href="#lst-groups_plugin_infection_manager_infect_contact-5"></a>    <span class="co">// work groups doing telework have a 50% contact mitigation</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-6"><a href="#lst-groups_plugin_infection_manager_infect_contact-6"></a>    GroupTypeId groupTypeId <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">getGroupType</span><span class="op">(</span>groupId<span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-7"><a href="#lst-groups_plugin_infection_manager_infect_contact-7"></a>    <span class="cf">if</span> <span class="op">(</span>groupTypeId<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>GroupType<span class="op">.</span><span class="fu">WORK</span><span class="op">))</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-8"><a href="#lst-groups_plugin_infection_manager_infect_contact-8"></a>        <span class="dt">boolean</span> teleworkGroup <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">getGroupPropertyValue</span><span class="op">(</span>groupId<span class="op">,</span> GroupProperty<span class="op">.</span><span class="fu">TELEWORK</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-9"><a href="#lst-groups_plugin_infection_manager_infect_contact-9"></a>        <span class="cf">if</span> <span class="op">(</span>teleworkGroup<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-10"><a href="#lst-groups_plugin_infection_manager_infect_contact-10"></a>            <span class="cf">if</span> <span class="op">(</span>randomGenerator<span class="op">.</span><span class="fu">nextBoolean</span><span class="op">())</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-11"><a href="#lst-groups_plugin_infection_manager_infect_contact-11"></a>                <span class="cf">return</span><span class="op">;</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-12"><a href="#lst-groups_plugin_infection_manager_infect_contact-12"></a>            <span class="op">}</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-13"><a href="#lst-groups_plugin_infection_manager_infect_contact-13"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-14"><a href="#lst-groups_plugin_infection_manager_infect_contact-14"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-15"><a href="#lst-groups_plugin_infection_manager_infect_contact-15"></a></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-16"><a href="#lst-groups_plugin_infection_manager_infect_contact-16"></a>    <span class="co">// school groups in COHORT mode have a 50% contact mitigation</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-17"><a href="#lst-groups_plugin_infection_manager_infect_contact-17"></a>    <span class="co">// school groups in CLOSED mode have a 100% contact mitigation</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-18"><a href="#lst-groups_plugin_infection_manager_infect_contact-18"></a>    <span class="cf">if</span> <span class="op">(</span>groupTypeId<span class="op">.</span><span class="fu">equals</span><span class="op">(</span>GroupType<span class="op">.</span><span class="fu">SCHOOL</span><span class="op">))</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-19"><a href="#lst-groups_plugin_infection_manager_infect_contact-19"></a>        SchoolStatus schoolStatus <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">getGroupPropertyValue</span><span class="op">(</span>groupId<span class="op">,</span> GroupProperty<span class="op">.</span><span class="fu">SCHOOL_STATUS</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-20"><a href="#lst-groups_plugin_infection_manager_infect_contact-20"></a>        <span class="cf">switch</span> <span class="op">(</span>schoolStatus<span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-21"><a href="#lst-groups_plugin_infection_manager_infect_contact-21"></a>        <span class="cf">case</span> COHORT<span class="op">:</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-22"><a href="#lst-groups_plugin_infection_manager_infect_contact-22"></a>            <span class="cf">if</span> <span class="op">(</span>randomGenerator<span class="op">.</span><span class="fu">nextBoolean</span><span class="op">())</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-23"><a href="#lst-groups_plugin_infection_manager_infect_contact-23"></a>                <span class="cf">return</span><span class="op">;</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-24"><a href="#lst-groups_plugin_infection_manager_infect_contact-24"></a>            <span class="op">}</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-25"><a href="#lst-groups_plugin_infection_manager_infect_contact-25"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-26"><a href="#lst-groups_plugin_infection_manager_infect_contact-26"></a>        <span class="cf">case</span> CLOSED<span class="op">:</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-27"><a href="#lst-groups_plugin_infection_manager_infect_contact-27"></a>            <span class="cf">return</span><span class="op">;</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-28"><a href="#lst-groups_plugin_infection_manager_infect_contact-28"></a>        <span class="kw">default</span><span class="op">:</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-29"><a href="#lst-groups_plugin_infection_manager_infect_contact-29"></a>            <span class="co">// no mitigation</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-30"><a href="#lst-groups_plugin_infection_manager_infect_contact-30"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-31"><a href="#lst-groups_plugin_infection_manager_infect_contact-31"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-32"><a href="#lst-groups_plugin_infection_manager_infect_contact-32"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-33"><a href="#lst-groups_plugin_infection_manager_infect_contact-33"></a></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-34"><a href="#lst-groups_plugin_infection_manager_infect_contact-34"></a>    GroupSampler groupSampler <span class="op">=</span> GroupSampler<span class="op">.</span><span class="fu">builder</span><span class="op">().</span><span class="fu">setExcludedPersonId</span><span class="op">(</span>personId<span class="op">).</span><span class="fu">build</span><span class="op">();</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-35"><a href="#lst-groups_plugin_infection_manager_infect_contact-35"></a>    Optional<span class="op">&lt;</span>PersonId<span class="op">&gt;</span> optional <span class="op">=</span> groupsDataManager<span class="op">.</span><span class="fu">sampleGroup</span><span class="op">(</span>groupId<span class="op">,</span> groupSampler<span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-36"><a href="#lst-groups_plugin_infection_manager_infect_contact-36"></a>    <span class="cf">if</span> <span class="op">(</span>optional<span class="op">.</span><span class="fu">isPresent</span><span class="op">())</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-37"><a href="#lst-groups_plugin_infection_manager_infect_contact-37"></a>        PersonId contactedPerson <span class="op">=</span> optional<span class="op">.</span><span class="fu">get</span><span class="op">();</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-38"><a href="#lst-groups_plugin_infection_manager_infect_contact-38"></a>        DiseaseState diseaseState <span class="op">=</span> personPropertiesDataManager<span class="op">.</span><span class="fu">getPersonPropertyValue</span><span class="op">(</span>contactedPerson<span class="op">,</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-39"><a href="#lst-groups_plugin_infection_manager_infect_contact-39"></a>                PersonProperty<span class="op">.</span><span class="fu">DISEASE_STATE</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-40"><a href="#lst-groups_plugin_infection_manager_infect_contact-40"></a>        <span class="cf">if</span> <span class="op">(</span>diseaseState <span class="op">==</span> DiseaseState<span class="op">.</span><span class="fu">SUSCEPTIBLE</span><span class="op">)</span> <span class="op">{</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-41"><a href="#lst-groups_plugin_infection_manager_infect_contact-41"></a>            <span class="dt">int</span> infectedCount <span class="op">=</span> personPropertiesDataManager<span class="op">.</span><span class="fu">getPersonPropertyValue</span><span class="op">(</span>personId<span class="op">,</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-42"><a href="#lst-groups_plugin_infection_manager_infect_contact-42"></a>                    PersonProperty<span class="op">.</span><span class="fu">INFECTED_COUNT</span><span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-43"><a href="#lst-groups_plugin_infection_manager_infect_contact-43"></a>            infectedCount<span class="op">++;</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-44"><a href="#lst-groups_plugin_infection_manager_infect_contact-44"></a>            personPropertiesDataManager<span class="op">.</span><span class="fu">setPersonPropertyValue</span><span class="op">(</span>personId<span class="op">,</span> PersonProperty<span class="op">.</span><span class="fu">INFECTED_COUNT</span><span class="op">,</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-45"><a href="#lst-groups_plugin_infection_manager_infect_contact-45"></a>                    infectedCount<span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-46"><a href="#lst-groups_plugin_infection_manager_infect_contact-46"></a>            <span class="fu">infectPerson</span><span class="op">(</span>contactedPerson<span class="op">);</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-47"><a href="#lst-groups_plugin_infection_manager_infect_contact-47"></a>        <span class="op">}</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-48"><a href="#lst-groups_plugin_infection_manager_infect_contact-48"></a>    <span class="op">}</span></span>
<span id="lst-groups_plugin_infection_manager_infect_contact-49"><a href="#lst-groups_plugin_infection_manager_infect_contact-49"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="inspecting-the-output" class="level3" data-number="10.10.4">
<h3 data-number="10.10.4" class="anchored" data-anchor-id="inspecting-the-output"><span class="header-section-number">10.10.4</span> Inspecting the output</h3>
</section>
<section id="person-property-report" class="level3" data-number="10.10.5">
<h3 data-number="10.10.5" class="anchored" data-anchor-id="person-property-report"><span class="header-section-number">10.10.5</span> Person Property Report</h3>
<p>The 36 scenarios result in a large amount of output in the person property report. It is effectively a trace log of the initial state and changes to each person.</p>
</section>
<section id="group-population-report" class="level3" data-number="10.10.6">
<h3 data-number="10.10.6" class="anchored" data-anchor-id="group-population-report"><span class="header-section-number">10.10.6</span> Group Population Report</h3>
<p>The group population report shows the distribution of people at the end of the simulation. Since there is no stochastics dimension, each scenario has an identical distribution of people into homes. The report shows all the expected patterns as a response to initial policies. For example, higher school closure infection thresholds drive the ending school populations to less than 1/3 their initial values.</p>
</section>
<section id="disease-state-report" class="level3" data-number="10.10.7">
<h3 data-number="10.10.7" class="anchored" data-anchor-id="disease-state-report"><span class="header-section-number">10.10.7</span> Disease State Report</h3>
<p>The disease state report shows the ending counts for each disease state. By analyzing the number of people recovered over the 36 scenarios, we observe that the disease threshold for triggering work places into a telework status is significant. If that threshold is set to 10%, the working population does not telework and the number of recovered is significantly higher that at the lower levels. School cohort and closure policies exhibit a similar pattern.</p>
</section>
<section id="contagion-report" class="level3" data-number="10.10.8">
<h3 data-number="10.10.8" class="anchored" data-anchor-id="contagion-report"><span class="header-section-number">10.10.8</span> Contagion Report</h3>
<p>The contagion report shows then number of people infected by each infectious person as counts. The report shows that early decisions to close schools and institute telework policies can significantly reduce the spread of the disease.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./ch09-PersonPropertiesPlugin.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Person Properties Plugin</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./ch11-ResourcesPlugin.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Resources Plugin</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>